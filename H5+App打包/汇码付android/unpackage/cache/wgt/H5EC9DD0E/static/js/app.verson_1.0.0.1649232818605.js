(function(t){function e(e){for(var n,i,o=e[0],c=e[1],l=e[2],u=0,p=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&p.push(s[i][0]),s[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==s[c]&&(n=!1)}n&&(r.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},s={app:0},r=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"02b2":function(t,e,a){t.exports=a.p+"static/img/add.png?"},"034f":function(t,e,a){"use strict";a("4b77")},"0582":function(t,e,a){},"05f7":function(t,e,a){t.exports=a.p+"static/img/yl.png?"},"0cce":function(t,e,a){},"13d2":function(t,e,a){"use strict";a("182e")},"182e":function(t,e,a){},"191d":function(t,e,a){},"229a":function(t,e,a){},2481:function(t,e,a){t.exports=a.p+"static/img/ico3_3.png?"},"2bbc":function(t,e,a){t.exports=a.p+"static/img/ico1_1.png?"},"2c46e":function(t,e,a){},"2f2b":function(t,e,a){"use strict";a("fe39")},3061:function(t,e,a){t.exports=a.p+"static/img/nav1.png?"},"30e2":function(t,e,a){"use strict";a("451f")},3180:function(t,e,a){"use strict";a("3407")},"336c":function(t,e,a){t.exports=a.p+"static/img/back.png?"},3407:function(t,e,a){},3494:function(t,e,a){},3517:function(t,e,a){"use strict";a("c054")},3547:function(t,e,a){t.exports=a.p+"static/img/phone.png?"},3957:function(t,e,a){t.exports=a.p+"static/img/nav5.png?"},"3d02":function(t,e,a){t.exports=a.p+"static/img/logo.png?"},4267:function(t,e,a){t.exports=a.p+"static/img/nav1.png?"},"438d":function(t,e,a){"use strict";a("a40c")},"43a1":function(t,e,a){t.exports=a.p+"static/img/ico3.png?"},"44b8":function(t,e,a){},"451f":function(t,e,a){},4528:function(t,e,a){"use strict";a("49ec")},"49ec":function(t,e,a){},"4b77":function(t,e,a){},"4d0e":function(t,e,a){t.exports=a.p+"static/img/ali.png?"},"4ee8":function(t,e,a){t.exports=a.p+"static/img/down.png?"},"4fce":function(t,e,a){t.exports=a.p+"static/img/ico2_2.png?"},"555a":function(t,e,a){t.exports=a.p+"static/img/icon.png?"},"56d7":function(t,e,a){"use strict";a.r(e);a("6da3"),a("dea3"),a("da68"),a("1311"),a("10dd");var n=a("2c46"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],i=a("a8d5"),o=(a("e186"),a("87d5"),{data:function(){return{isFromApp:!1}},mounted:function(){this.isFromApp=!!this.$route.query.isFromApp&&this.$route.query.isFromApp,localStorage.setItem("isFromApp",this.isFromApp),this.isFromApp&&this.$nextTick((function(){document.addEventListener("UniAppJSBridgeReady",(function(){console.log("APP created 执行 UniAppJSBridgeReady"),uni.getEnv((function(t){console.log("当前环境："+JSON.stringify(t))})),uni.postMessage({data:{type:"router",isQuitApp:!0}})}))}))},watch:{$route:function(t,e){"Login"==e.name&&this.autoUpdate(),this.removeDom();var a=t.path;t.path,uni.postMessage({data:a})}},created:function(){window.plus?this.getSys():document.addEventListener("plusready",this.getSys,!1),this.updateData(),localStorage.getItem("token")&&(this.$store.state.token=localStorage.getItem("token"),this.autoUpdate())},methods:{getSys:function(){this.$store.state.deviceOsType=plus.os.name},autoUpdate:function(){window.plus?this.plusReady():document.addEventListener("plusready",this.plusReady,!1)},plusReady:function(){var t=this;this.$store.state.DeviceNum=plus.device.imei,plus.runtime.getProperty(plus.runtime.appid,(function(e){t.$store.state.version=e.version,t.checkVersion(e.version)}))},checkVersion:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n={transCode:"VERCHECK",myVersion:t,mobileNo:localStorage.getItem("phone")},a.next=3,e.$api.sendMs(n);case 3:s=a.sent,console.log("新版本"),console.log(s),"SUCCESS"===s.retCode&&s.download&&e.$dialog.confirm({title:"更新提示",message:"检测到有新版本,当前版本:"+t+",新版本："+s.newVersion+", 是否更新?"}).then((function(){"Android"==plus.os.name?e.downloadApp(s.download):plus.runtime.openURL(s.download)})).catch((function(){}));case 7:case"end":return a.stop()}}),a)})))()},downloadApp:function(t){var e=plus.downloader.createDownload(t,{},(function(t,e){if(200==e){var a=t.filename;plus.runtime.install(a)}else alert("Download failed: "+e)}));e.start();var a=0,n=plus.nativeUI.showWaiting("正在下载");e.addEventListener("statechanged",(function(t,e){switch(t.state){case 1:n.setTitle("正在下载");break;case 3:a=parseInt(parseFloat(t.downloadedSize)/parseFloat(t.totalSize)*100),n.setTitle("  正在下载"+a+"%  ");break;case 4:plus.nativeUI.closeWaiting();break}}))},downloadWgt:function(t){var e=this;plus.nativeUI.showWaiting("下载更新文件中..."),plus.downloader.createDownload(t,{filename:"_doc/update/"},(function(t,a){200===a?e.installWgt(t.filename):plus.nativeUI.alert("下载更新文件失败！"),plus.nativeUI.closeWaiting()})).start()},installWgt:function(t){plus.nativeUI.showWaiting("安装更新文件..."),plus.runtime.install(t,{force:!0},(function(){plus.nativeUI.closeWaiting(),plus.nativeUI.alert("应用资源更新完成！",(function(){plus.runtime.restart()}))}),(function(t){plus.nativeUI.closeWaiting(),plus.nativeUI.alert("安装更新文件失败["+t.code+"]："+t.message)}))},updateData:function(){var t=this;document.addEventListener("visibilitychange",(function(){console.log(document.visibilityState),document.hidden,localStorage.getItem("openPass")&&(localStorage.setItem("openPassok",""),t.$router.push({path:"/resume"}))}))},adlisten:function(){function t(){document.addEventListener("resume",e,!1)}function e(){localStorage.getItem("openPass")&&(localStorage.setItem("openPassok",""),this.$router.push({path:"/resume"}))}document.addEventListener("plusready",t,!1)},removeDom:function(){if(document.getElementById("PWDKBD")){var t=document.getElementById("PWDKBD");console.log(t),t&&(document.body.removeChild(t),document.getElementById("PWDKBD")&&this.removeDom())}}}}),c=o,l=(a("034f"),a("cba8")),d=Object(l["a"])(c,s,r,!1,null,null,null),u=d.exports,p=a("ac56"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"homebox"},[a("van-swipe",{staticClass:"my-swipe",attrs:{"initial-swipe":t.current,"show-indicators":!1},on:{change:t.onChange}},[a("van-swipe-item",[a("div",{staticStyle:{height:"100vh"}},[a("finance")],1)]),a("van-swipe-item",[a("div",{staticStyle:{height:"100vh"}},[a("home",{ref:"home"})],1)]),a("van-swipe-item",[a("div",{staticStyle:{height:"100vh"}},[a("user")],1)])],1),a("pfooter",{attrs:{active:t.current}})],1)},f=[],h=a("f026"),g=a("7736"),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home financehome"},[t._m(0),n("div",{staticClass:"top"}),n("div",{staticClass:"card"},[n("div",{staticClass:"cardcb"},[t._m(1),t.cardNum?n("div",{staticClass:"cardNum"},[n("span",{staticClass:"cnum"},[t._v(" "+t._s(t.cardNum.slice(0,4))+" ")]),t._m(2),t._m(3),n("span",{staticClass:"cnum"},[t._v(" "+t._s(t.cardNum.substr(-4))+" ")])]):t._e()])]),n("div",{staticClass:"navs"},[n("div",{staticClass:"nav",on:{click:function(e){return t.showPwd()}}},[n("img",{attrs:{src:a("3061")}}),n("h4",[t._v("余额")])]),n("div",{staticClass:"nav",on:{click:function(e){return t.goconsume()}}},[n("img",{attrs:{src:a("a30c")}}),n("h4",[t._v("消费记录")])]),n("div",{staticClass:"nav",on:{click:function(e){return t.gorecharge()}}},[n("img",{attrs:{src:a("a5f6")}}),n("h4",[t._v("充值")])]),n("div",{staticClass:"nav",on:{click:function(e){return t.gorechargelist()}}},[n("img",{attrs:{src:a("ff23")}}),n("h4",[t._v("充值记录")])]),n("div",{staticClass:"nav",on:{click:function(e){return t.goset()}}},[n("img",{attrs:{src:a("3957")}}),n("h4",[t._v("设置")])])]),n("div",{staticClass:"passBox",class:t.show?"showpassBox":""},[n("div",{staticClass:"listr",staticStyle:{width:"80vw",padding:"3vw 0 0 0","border-radius":"10px",border:"1px solid #8F8F8F",margin:"3vw",background:"white"},attrs:{id:"pas1"}},[n("h2",{staticStyle:{"margin-bottom":"3vw","text-align":"center"}},[t._v("请输入密码")]),n("div",{staticStyle:{width:"auto","text-align":"left",border:"1px solid #a89b9b",margin:"3vw"},attrs:{id:"areaNumber"+t.pwdid}},[n("div",{staticStyle:{width:"100%",height:"33px","line-height":"33px","text-indent":"0.5em","font-family":"微软雅黑,黑体",outline:"none"},attrs:{id:"numberInput"+t.pwdid,diasbled:"",placeholder:"请输入6位数字的交易密码",tabIndex:"1",kbdtype:"Number",action:"/PasswordServlet","modulus-hex":"a974e94429df917231eb905d71ec0386be6120c3132cebed6c932c55444d781b43f0616be8d19b9ad4e4e9e9762f384dd1fb4b81fee947a9b6c09966ee3d8f7efff035cb13528e0862641eb744a64aa91208ffa53c9f11df7293a50814c9e75c631604fe90caa91c78d8f2250ebd489451f3d20fdb8f6dc1e49e88555eb80fdd",readonly:"readonly"}})]),n("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[n("span",{staticStyle:{padding:"3vw",flex:"1","text-align":"center","border-top":"1px solid #c4c4c4"},on:{click:function(e){t.show=!1}}},[t._v("取消")]),n("span",{staticStyle:{padding:"3vw",flex:"1",color:"#D53029","text-align":"center","border-left":"1px solid #c4c4c4","border-top":"1px solid #c4c4c4"},on:{click:function(e){return t.GetPwd()}}},[t._v("确定")])])])]),n("pfooter",{attrs:{active:0}})],1)},b=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"financehead"},[a("span",[t._v("金融")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cardc",staticStyle:{opacity:"0"}},[n("img",{attrs:{src:a("05f7")}}),n("div",[n("h3",[t._v("招商银行")]),n("p",[t._v("储蓄卡")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"dot"},[a("i"),a("i"),a("i"),a("i")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"dot"},[a("i"),a("i"),a("i"),a("i")])}],w={name:"Home",components:{},data:function(){return{num:1,data:"abs",cardNum:"",show:!1,encpwd:"",pwdid:(new Date).getTime()}},activated:function(){this.num+=1,console.log("created",this.num)},mounted:function(){if(console.log("mounted"),console.log(this.pwdid),0==this.$store.state.current){$(window).loadKBD();var t=this,e="#numberInput"+t.pwdid,a="areaNumber"+t.pwdid;$(e).click((function(){$(e).showKBD({areaId:a,pageId:"opencard",maxLen:6,cursor:!0,mask:!0})}))}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:({xid:123,pageSize:20,type:1,pageNo:"",obj:{id:1},arr:[2,3,5]}),t.cardNum=localStorage.getItem("CardNo")?localStorage.getItem("CardNo"):"";case 2:case"end":return e.stop()}}),e)})))()},watch:{"$store.state.current":function(t,e){if(document.getElementById("PWDKBD")){var a=document.getElementById("PWDKBD");console.log(a),a&&(document.body.removeChild(a),document.getElementById("PWDKBD")&&this.removeDom())}if(0==t){this.cardNum=localStorage.getItem("CardNo")?localStorage.getItem("CardNo"):"",$(window).loadKBD();var n="#numberInput"+this.pwdid,s="areaNumber"+this.pwdid;console.log(n),$(n).click((function(){$(n).showKBD({areaId:s,pageId:"opencard",maxLen:6,cursor:!0,mask:!0})}))}}},methods:{GetPwd:function(){var t=this,e=$("#numberInput"+t.pwdid).getKBD();console.log(e),e?$.ajax({type:"POST",url:"https://online.gzekt.com/vcard/pwd/ValidServlet",async:!0,headers:{SESSIONID:localStorage.getItem("sessionid"),token:localStorage.getItem("sessionid")},data:{Password:e},dataType:"json",crossDomain:!0,success:function(e){console.log(e),0==e.retcode?(t.encpwd=e.encpwd,t.goBal()):this.$toast(e.retmsg)}}):this.$toast("请输入密码")},showPwd:function(){this.cardNum?this.show=!0:this.$toast("请先开卡")},goBal:function(){this.cardNum?this.$router.push({path:"/balance",query:{pwd:this.encpwd}}):this.$toast("请先开卡")},goconsume:function(){this.cardNum?this.$router.push({path:"/consume"}):this.$toast("请先开卡")},gorechargelist:function(){this.cardNum?this.$router.push({path:"/rechargelist"}):this.$toast("请先开卡")},gorecharge:function(){this.cardNum?this.$router.push({path:"/recharge"}):this.$toast("请先开卡")},goset:function(){this.cardNum?this.$router.push({path:"/set"}):this.$toast("请先开卡")}}},C=w,x=(a("cce6"),Object(l["a"])(C,v,b,!1,null,"ebdd166a",null)),S=x.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[t._m(0),n("div",{staticClass:"card"},[n("div",{staticClass:"cardc"},[n("p",{staticClass:"tit"},[t._v("付款码")]),t.hascard?n("div",[t._m(1),t.qrCode?n("div",{ref:"qrCodeDiv",staticClass:"code qrcodeImg"}):t._e()]):n("div",{staticClass:"nocard",on:{click:function(e){return t.goopencard()}}},[n("img",{attrs:{src:a("02b2")}}),n("h4",[t._v("请添加")]),n("p",[t._v("没有可用的卡片")])])]),t._m(2)]),n("van-popup",{attrs:{round:"","get-container":t.getContainer},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("div",{staticClass:"container"},[n("div",{staticClass:"vcard"},[n("div",{staticClass:"msg"},[t._v("请先开卡！")]),n("div",{staticClass:"btn btncolor"},[t._v(" 银行卡支付 ")])]),n("div",{staticClass:"btn",on:{click:function(e){return t.wxlog()}}},[t._v(" 校园轻松付 ")])])])],1)},y=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"homehead"},[a("span",[t._v("首页")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"lineimg"},[a("img",{attrs:{id:"barcode",src:""}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"logo"},[n("img",{attrs:{src:a("3d02")}}),n("span",[t._v("可配置")])])}],_=(a("4c1e"),a("bbe2"),a("d1ba"),a("87bf"),a("cea3"),a("6370"),a("d5ee"),a("82ae")),k=a.n(_),I=a("1f57"),N=a.n(I),O=a("53b6"),T=a.n(O),E={name:"Home",components:{},data:function(){return{hascard:!0,cardNo:"",qrCode:"",QRCodeObj:null,setTimeoutFN:null,show:!0,codetoken:"",auths:null,alsoLogin:!0,shares:null,preList:""}},created:function(){this.show=!1,console.log("rettt"),console.log(this.$store.state.current),1==this.$store.state.current&&(localStorage.getItem("campusId")?(this.show=!0,this.getCard()):this.stuReg())},beforeDestroy:function(){clearTimeout(this.setTimeoutFN)},watch:{"$store.state.current":function(t,e){1==t?localStorage.getItem("campusId")?(this.show=!0,this.getCard()):this.stuReg():clearTimeout(this.setTimeoutFN)}},methods:{wxApp:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k()({method:"post",url:"https://online.gzekt.com/vcardserver/user/wxauth",data:{code:t.codetoken,mobileNo:"13725737343"}}).then((function(e){t.preList=e.data,alert("预签约："+JSON.stringify(t.preList))}));case 2:if(0===t.preList.errcode){e.next=5;break}return alert("预签约失败！"),e.abrupt("return");case 5:a=t,plus.share.getServices((function(t){var e={};for(var n in t){var s=t[n];e[s.id]=s}alert("获取分享服务列表成功： "+JSON.stringify(e));var r=e["weixin"];r.launchMiniProgram({id:"gh_30b13ed85235",path:"pages/index/index?presign_token=".concat(a.preList.presign_token),type:0})}),(function(t){alert("获取分享服务列表失败： "+JSON.stringify(t))}));case 7:case"end":return e.stop()}}),e)})))()},wxlog:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,e.next=3,plus.oauth.getServices((function(t){a.auths=t,a.authLogin()}),(function(t){alert("获取分享服务列表失败："+t.message+" - "+t.code)}));case 3:t.alsoLogin&&(t.alsoLogin=!1,t.wxlog());case 4:case"end":return e.stop()}}),e)})))()},authLogin:function(){var t=this,e=t.auths[0];e.authResult?e.authorize((function(e){alert("授权成功："+JSON.stringify(e)),t.codetoken=e.code}),(function(t){alert("授权失败："+JSON.stringify(t))}),{scope:"snsapi_userinfo",state:"authorize test",appid:"wxbd433e331b2fb2df"}):alert("未登录授权！")},getContainer:function(){return document.querySelector(".my-container")},stuReg:function(){var t=this;console.log("返回"),setTimeout((function(){t.$dialog.alert({title:"提示",message:"请先进行学员注册"}).then((function(){t.$router.push({path:"/stureg"})})).catch((function(){}))}),100)},bindQRCode:function(){console.log(this.QRCodeObj),this.$refs.qrCodeDiv.innerHTML="",this.QRCodeObj=new N.a(this.$refs.qrCodeDiv,{text:this.qrCode,width:160,height:160,colorDark:"#333333",colorLight:"#ffffff",correctLevel:N.a.CorrectLevel.L}),T()("#barcode","DY2020080400088",{format:"CODE39",lineColor:"#000",background:"#EBEEF5",width:4,height:40,displayValue:!1})},getCard:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="",Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t},new Date,a=(new Date).Format("yyyy-MM-dd hh:mm:ss"),n={transCode:"QRCODE",mobileNo:localStorage.getItem("phone")||"",localTime:a,member:localStorage.getItem("campusId")||""},e.next=7,t.$api.sendMs(n);case 7:s=e.sent,console.log(s),"SUCCESS"==s.retCode?(t.hascard=!0,t.qrCode="",t.qrCode=s.qrCode,t.$nextTick((function(){this.bindQRCode()})),t.setTimeoutFN=setTimeout((function(){t.getCard()}),1e3*(s.expireSecond-2))):("E3"==s.retCode&&t.$dialog.alert({title:s.retMsg+"，前往激活"}).then((function(){t.$router.push({path:"/forgotpaypwd",query:{type:"activation"}})})),t.hascard=!1);case 10:case"end":return e.stop()}}),e)})))()},goopencard:function(){this.$router.push({path:"/opencard"})}}},R=E,P=(a("ea58"),Object(l["a"])(R,D,y,!1,null,"026e4cec",null)),j=P.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home userhome"},[t._m(0),a("div",{staticClass:"top"}),a("div",{staticClass:"card",style:{backgroundImage:"url("+t.cardFace+")"}},[a("div",{staticClass:"cardl"})]),t._m(1),a("div",{staticClass:"btn",on:{click:function(e){return t.LoginOut()}}},[t._v(" 退出登录 ")]),a("p",{staticStyle:{color:"#999999","text-align":"center","font-size":"12px","padding-top":"10px"}},[t._v(" version:"+t._s(t.$store.state.version)+" ")])])},F=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"userhead"},[a("span",[t._v("个人")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navs"},[n("div",{staticClass:"nav"},[n("div",{staticClass:"navl"},[n("img",{staticClass:"ico",attrs:{src:a("4267")}}),n("span",[t._v("教学楼")])]),n("div",[n("img",{staticClass:"r",attrs:{src:a("b4ec")}})])]),n("div",{staticClass:"nav"},[n("div",{staticClass:"navl"},[n("img",{staticClass:"ico",attrs:{src:a("a42e")}}),n("span",[t._v("音乐馆")])]),n("div",[n("img",{staticClass:"r",attrs:{src:a("b4ec")}})])]),n("div",{staticClass:"nav"},[n("div",{staticClass:"navl"},[n("img",{staticClass:"ico",attrs:{src:a("91b8")}}),n("span",[t._v("体育场")])]),n("div",[n("img",{staticClass:"r",attrs:{src:a("b4ec")}})])])])}],A={name:"Home",components:{},data:function(){return{num:1,data:"abs",version:"",cardFace:""}},activated:function(){},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.cardFace=localStorage.getItem("cardFace");case 1:case"end":return e.stop()}}),e)})))()},watch:{"$store.state.current":function(t,e){2==t&&(console.log("user"),this.cardFace=localStorage.getItem("cardFace"),console.log(localStorage.getItem("cardFace")))}},methods:{LoginOut:function(){var t=localStorage.getItem("openPass")||"";console.log(t),localStorage.clear(),this.$store.state.token="",localStorage.setItem("openPass",t),this.$router.push({path:"/login"})}}},L=A,M=(a("3517"),Object(l["a"])(L,B,F,!1,null,"091d4cc9",null)),U=M.exports,q={name:"homebox",components:{finance:S,home:j,user:U},data:function(){return{}},computed:Object(h["a"])({},Object(g["b"])(["current"])),created:function(){console.log("ret")},watch:{"$store.state.current":function(t,e){1!==t&&(this.$refs.home.show=!1)}},methods:{onChange:function(t){this.$store.state.current=t}}},z=q,J=Object(l["a"])(z,m,f,!1,null,null,null),K=J.exports,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[t._m(0),n("div",[n("div",{staticClass:"navs"},[n("div",{staticClass:"nav",class:0==t.active?"active":"",on:{click:function(e){return t.changeNav(0)}}},[t._v(" 手机号登录 ")])]),n("div",[n("div",{staticClass:"lists"},[n("div",{staticClass:"list"},[n("img",{staticClass:"phone",attrs:{src:a("3547")}}),n("div",{staticClass:"listr"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],attrs:{type:"",name:"",id:"",value:"",placeholder:"输入手机号"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})])]),0==t.active?n("div",{staticClass:"list"},[n("img",{staticClass:"codeimg",attrs:{src:a("6a6c")}}),n("div",{staticClass:"listr"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],attrs:{type:"",name:"",id:"",value:"",placeholder:"输入验证码"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),n("span",{staticClass:"code",class:t.issend?"send":"",on:{click:function(e){return t.getCode()}}},[t._v(t._s(t.codeText))])])]):t._e(),1==t.active?n("div",{staticClass:"list"},[n("img",{staticClass:"codeimg",attrs:{src:a("6a6c")}}),n("div",{staticClass:"listr"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.pass,expression:"pass"}],attrs:{type:"",name:"",id:"",value:"",placeholder:"输入密码"},domProps:{value:t.pass},on:{input:function(e){e.target.composing||(t.pass=e.target.value)}}})])]):t._e()])]),n("div",{staticClass:"bom"},[n("div",{staticClass:"btn",on:{click:function(e){return t.loginFn()}}},[t._v(" 登录 ")]),t._m(1)])]),n("div",{staticClass:"btn",on:{click:function(e){return t.wxlog()}}},[t._v(" wx登录 ")]),n("div",{staticClass:"btn",on:{click:function(e){return t.wxApp()}}},[t._v(" wx小程序 ")])])},H=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tBox"},[n("img",{staticClass:"bg",attrs:{src:a("83a3")}}),n("div",{staticClass:"logo"},[n("img",{staticClass:"icon",attrs:{src:a("555a")}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tips"},[a("span",[t._v("登录即代表同意")]),a("span",{staticClass:"color"},[t._v("《用户协议》")]),a("span",[t._v("和")]),a("span",{staticClass:"color"},[t._v("《隐私政策》")])])}],V={name:"login",components:{},data:function(){return{active:0,issend:!1,codeText:"发送验证码",timer:null,time:60,orderNo:"",phone:"",code:"",pass:"",smsOrder:"",codetoken:"",auths:null,alsoLogin:!0,shares:null,preList:""}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$route.query.nav&&(t.active=t.$route.query.nav);case 1:case"end":return e.stop()}}),e)})))()},mounted:function(){},methods:{wxApp:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k()({method:"post",url:"https://online.gzekt.net/vcardserver/user/wxauth",data:{code:t.codetoken,mobileNo:"13725737343"}}).then((function(e){t.preList=e.data,alert("预签约："+JSON.stringify(t.preList))}));case 2:if(0===t.preList.errcode){e.next=5;break}return alert("预签约失败！"),e.abrupt("return");case 5:a=t,plus.share.getServices((function(t){var e={};for(var n in t){var s=t[n];e[s.id]=s}alert("获取分享服务列表成功： "+JSON.stringify(e));var r=e["weixin"];r.launchMiniProgram({id:"gh_30b13ed85235",path:"pages/index/index?presign_token=".concat(a.preList.presign_token),type:0})}),(function(t){alert("获取分享服务列表失败： "+JSON.stringify(t))}));case 7:case"end":return e.stop()}}),e)})))()},wxlog:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,e.next=3,plus.oauth.getServices((function(t){auths=t,a.authLogin()}),(function(t){alert("获取分享服务列表失败："+t.message+" - "+t.code)}));case 3:t.alsoLogin&&(t.alsoLogin=!1,t.wxlog());case 4:case"end":return e.stop()}}),e)})))()},authLogin:function(){var t=this,e=t.auths[0];e.authResult?e.authorize((function(e){alert("授权成功："+JSON.stringify(e)),t.codetoken=e.code}),(function(t){alert("授权失败："+JSON.stringify(t))}),{scope:"snsapi_userinfo",state:"authorize test",appid:"wxbd433e331b2fb2df"}):alert("未登录授权！")},loginFn:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.phone){e.next=3;break}return t.$toast("请先输入手机号"),e.abrupt("return");case 3:if(t.smsOrder){e.next=6;break}return t.$toast("请先获取短信"),e.abrupt("return");case 6:if(t.code){e.next=9;break}return t.$toast("请输入短信验证码"),e.abrupt("return");case 9:return a=t,n={transCode:"USERLOGIN",mobileNo:a.phone,smsOrder:a.smsOrder,smsCode:a.code},e.next=13,a.$api.reqFn(n);case 13:return s=e.sent,console.log(s),"SUCCESS"==s.retCode?(a.$store.state.token=s.token,a.$store.state.phone=a.phone,a.$store.state.Sign=s.Sign,a.$store.state.frontSeq=s.frontSeq,s.campusId&&localStorage.setItem("campusId",s.campusId),s.cardFace&&localStorage.setItem("cardFace",s.cardFace),s.userId&&localStorage.setItem("userId",s.userId),s.cardNo&&localStorage.setItem("CardNo",s.cardNo),s.userName&&localStorage.setItem("userName",s.userName),s.idCardNo&&localStorage.setItem("idcardnum",s.idCardNo),localStorage.setItem("token",s.token),localStorage.setItem("phone",a.phone),localStorage.setItem("Sign",s.Sign),localStorage.setItem("Sign",s.frontSeq)):t.$toast(s.retMsg),setTimeout((function(){a.$router.push({path:"/"})}),1e3),e.abrupt("return");case 19:case"end":return e.stop()}}),e)})))()},goRegisert:function(){this.$router.push({path:"/register"})},goforgot:function(){this.$router.push({path:"/forgot"})},changeNav:function(t){this.active=t,this.issend=!1,this.codeText="发送验证码",clearInterval(this.timer),this.timer=null,this.tim=60},getCode:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.phone){e.next=3;break}return t.$toast("请输入正确的手机号"),e.abrupt("return");case 3:return a="sms"+(new Date).getTime(),n={transCode:"SMSREQUEST",mobileNo:t.phone,smsOrder:a},e.next=7,t.$api.sendMs(n);case 7:if(s=e.sent,console.log(s),"SUCCESS"!=s.retCode){e.next=15;break}t.$toast("发送成功"),t.orderNo=s.orderNo,t.smsOrder=a,e.next=16;break;case 15:return e.abrupt("return");case 16:t.issend=!0,t.timer=setInterval((function(){t.time-=1,t.codeText=t.time+" s 重新发送",t.time<=0&&(clearInterval(t.timer),t.issend=!1,t.codeText="重新发送",t.time=60)}),1e3);case 18:case"end":return e.stop()}}),e)})))()}}},Y=V,Q=(a("13d2"),Object(l["a"])(Y,W,H,!1,null,"b03f32b0",null)),G=Q.exports,X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[t._m(0),n("div",[n("div",{staticClass:"navs"},[n("div",{staticClass:"nav",class:1==t.active?"active":"",on:{click:function(e){return t.changeNav(1)}}},[t._v(" 请输入开机密码 ")])]),n("div",[n("div",{staticClass:"lists"},[1==t.active?n("div",{staticClass:"list"},[n("img",{staticClass:"codeimg",attrs:{src:a("6a6c")}}),n("div",{staticClass:"listr"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.pass,expression:"pass"}],attrs:{type:"password",name:"",id:"",value:"",placeholder:"输入密码"},domProps:{value:t.pass},on:{input:function(e){e.target.composing||(t.pass=e.target.value)}}})])]):t._e()])]),n("p",{staticClass:"forgot"},[n("span",{on:{click:function(e){return t.goforgot()}}},[t._v("忘记密码？")])]),n("div",{staticClass:"bom"},[n("div",{staticClass:"btn",on:{click:function(e){return t.loginFn()}}},[t._v(" 登录 ")])])])])},Z=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tBox"},[n("img",{staticClass:"bg",attrs:{src:a("83a3")}}),n("div",{staticClass:"logo"})])}],tt={name:"resume",components:{},data:function(){return{active:1,issend:!1,codeText:"发送验证码",timer:null,time:60,orderNo:"",phone:"",code:"",pass:"",smsOrder:""}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.isShow=!1,localStorage.getItem("openPass")&&"success"==localStorage.getItem("openPassok")&&t.$router.push({path:"/"});case 2:case"end":return e.stop()}}),e)})))()},methods:{loginFn:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t,a.pass==localStorage.getItem("openPass")?(localStorage.setItem("openPassok","success"),setTimeout((function(){a.$router.push({path:"/"})}),1e3)):t.$toast("开机密码错误");case 2:case"end":return e.stop()}}),e)})))()},goforgot:function(){var t=this;localStorage.clear(),this.$store.state.token="",setTimeout((function(){t.$router.push({path:"/login"})}),1e3)},changeNav:function(t){this.active=t,this.issend=!1,this.codeText="发送验证码",clearInterval(this.timer),this.timer=null,this.tim=60},getCode:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.phone){e.next=3;break}return t.$toast("请输入正确的手机号"),e.abrupt("return");case 3:return a="sms"+(new Date).getTime(),n={transCode:"SMSREQUEST",mobileNo:t.phone,smsOrder:a},e.next=7,t.$api.sendMs(n);case 7:if(s=e.sent,console.log(s),"SUCCESS"!=s.retCode){e.next=15;break}t.$toast("发送成功"),t.orderNo=s.orderNo,t.smsOrder=a,e.next=16;break;case 15:return e.abrupt("return");case 16:t.issend=!0,t.timer=setInterval((function(){t.time-=1,t.codeText=t.time+" s 重新发送",t.time<=0&&(clearInterval(t.timer),t.issend=!1,t.codeText="重新发送",t.time=60)}),1e3);case 18:case"end":return e.stop()}}),e)})))()}}},et=tt,at=(a("bf82"),Object(l["a"])(et,X,Z,!1,null,"45378920",null)),nt=at.exports,st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[t._m(0),n("div",[n("div",{staticClass:"navs"},[n("div",{staticClass:"nav",class:0==t.active?"active":""},[t._v(" 忘记密码 ")])]),n("div",[n("div",{staticClass:"lists"},[t._m(1),n("div",{staticClass:"list"},[n("img",{staticClass:"codeimg",attrs:{src:a("6a6c")}}),n("div",{staticClass:"listr"},[n("input",{attrs:{type:"",name:"",id:"",value:"",placeholder:"输入验证码"}}),n("span",{staticClass:"code",class:t.issend?"send":"",on:{click:function(e){return t.getCode()}}},[t._v(t._s(t.codeText))])])]),t._m(2),t._m(3)])]),n("div",{staticClass:"bom"},[n("div",{staticClass:"btn"},[t._v(" 确认修改 ")]),n("div",{staticClass:"tips"},[n("span",{on:{click:function(e){return t.goLogin()}}},[t._v("密码登录")])])])])])},rt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tBox"},[n("img",{staticClass:"bg",attrs:{src:a("83a3")}}),n("div",{staticClass:"logo"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list"},[n("img",{staticClass:"phone",attrs:{src:a("3547")}}),n("div",{staticClass:"listr"},[n("input",{attrs:{type:"",name:"",id:"",value:"",placeholder:"输入手机号"}})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list"},[n("img",{staticClass:"codeimg",attrs:{src:a("6edb")}}),n("div",{staticClass:"listr"},[n("input",{attrs:{type:"",name:"",id:"",value:"",placeholder:"新密码"}})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list"},[n("img",{staticClass:"codeimg",attrs:{src:a("6edb")}}),n("div",{staticClass:"listr"},[n("input",{attrs:{type:"",name:"",id:"",value:"",placeholder:"确认密码"}})])])}],it={name:"forgot",components:{},data:function(){return{active:0,issend:!1,codeText:"发送验证码",timer:null,time:60}},created:function(){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{goLogin:function(){this.$router.push({path:"/login?nav=1"})},changeNav:function(t){this.active=t,this.issend=!1,this.codeText="发送验证码",clearInterval(this.timer),this.timer=null,this.tim=60},getCode:function(){var t=this;this.issend=!0,this.timer=setInterval((function(){t.time-=1,t.codeText=t.time+" s 重新发送",t.time<=0&&(clearInterval(t.timer),t.issend=!1,t.codeText="重新发送",t.time=60)}),1e3)}}},ot=it,ct=(a("7218"),Object(l["a"])(ot,st,rt,!1,null,"2623f46e",null)),lt=ct.exports,dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[t._m(0),n("div",[n("div",{staticClass:"navs"},[n("div",{staticClass:"nav",class:0==t.active?"active":""},[t._v(" 账户注册 ")])]),n("div",[n("div",{staticClass:"lists"},[t._m(1),n("div",{staticClass:"list"},[n("img",{staticClass:"codeimg",attrs:{src:a("6a6c")}}),n("div",{staticClass:"listr"},[n("input",{attrs:{type:"",name:"",id:"",value:"",placeholder:"输入验证码"}}),n("span",{staticClass:"code",class:t.issend?"send":"",on:{click:function(e){return t.getCode()}}},[t._v(t._s(t.codeText))])])])])]),n("div",{staticClass:"bom"},[n("p",{staticClass:"noacount",on:{click:function(e){return t.goLogin()}}},[t._v("已有账号，去登录")]),n("div",{staticClass:"btn",on:{click:function(e){return t.registertFn()}}},[t._v(" 注册 ")]),t._m(2)])])])},ut=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tBox"},[n("img",{staticClass:"bg",attrs:{src:a("83a3")}}),n("div",{staticClass:"logo"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list"},[n("img",{staticClass:"phone",attrs:{src:a("3547")}}),n("div",{staticClass:"listr"},[n("input",{attrs:{type:"",name:"",id:"",value:"",placeholder:"输入手机号"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tips"},[a("span",[t._v("注册即代表同意")]),a("span",{staticClass:"color"},[t._v("《用户协议》")]),a("span",[t._v("和")]),a("span",{staticClass:"color"},[t._v("《隐私政策》")])])}],pt={name:"forgot",components:{},data:function(){return{active:0,issend:!1,codeText:"发送验证码",timer:null,time:60}},created:function(){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{registertFn:function(){this.$router.push({path:"/"})},goLogin:function(){this.$router.push({path:"/login"})},changeNav:function(t){this.active=t,this.issend=!1,this.codeText="发送验证码",clearInterval(this.timer),this.timer=null,this.tim=60},getCode:function(){var t=this;this.issend=!0,this.timer=setInterval((function(){t.time-=1,t.codeText=t.time+" s 重新发送",t.time<=0&&(clearInterval(t.timer),t.issend=!1,t.codeText="重新发送",t.time=60)}),1e3)}}},mt=pt,ft=(a("ed5a"),Object(l["a"])(mt,dt,ut,!1,null,"79d93aee",null)),ht=ft.exports,gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"balance"},[a("pheader",{attrs:{back:!0,title:"余额",bg:"#d9302500",color:"white"}}),a("div",{staticClass:"bg"},[a("p",[t._v("当前余额")]),a("h3",[t._v(t._s(Number(t.cardBalance)/100))])]),a("div",{staticClass:"btn"},[t._v(" 充值 ")]),a("div",{staticClass:"lists"},[a("h3",[t._v("金额变动记录")]),t._l(t.list,(function(e,n){return a("div",{staticClass:"list"},[a("div",{staticClass:"listl"},[a("p",[t._v(t._s(e.TranDesc))]),a("span",[t._v(t._s(e.TranDate)+"----"+t._s(e.TranTime))])]),a("div",{staticClass:"listr",class:e.AmtTrans.indexOf("+")>=0?"color":""},[t._v(" "+t._s(e.AmtTrans.indexOf("+")>=0?"+":"-")+t._s(e.AmtTrans/100)+" ")])])}))],2),a("div",{staticStyle:{padding:"20px","text-align":"center"}},["1"==t.morePage?a("span",{on:{click:function(e){return t.getLists()}}},[t._v("查看更多")]):a("span",[t._v("暂无更多")])]),a("van-calendar",{attrs:{type:"range"},on:{confirm:t.onConfirm},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],1)},vt=[],bt=a("0d9f"),wt=(a("b3d9"),{name:"balance",components:{},data:function(){return{show:!1,pwd:"",num:1,cardBalance:"0.00",startDate:"",endDate:"",morePage:"",lastSysDate:"",lastSysTime:"",lastTransSeq:"",list:[]}},mounted:function(){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},created:function(){this.startDate=this.getBeforeDate(30),this.endDate=this.getBeforeDate(0),this.$route.query.pwd?(this.pwd=this.$route.query.pwd,this.getBalance()):this.$router.go(-1)},methods:{getLists:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t,a={transCode:"ACCOUNTDETAIL",mobileNo:localStorage.getItem("phone")||"",cardNo:localStorage.getItem("CardNo")||"",startDate:t.startDate,endDate:t.endDate,morePage:t.morePage,lastSysDate:t.lastSysDate,lastSysTime:t.lastSysTime,lastTransSeq:t.lastTransSeq},e.next=4,t.$api.sendMs(a);case 4:n=e.sent,console.log(n),"SUCCESS"==n.retCode?(t.list=n.details,t.morePage=n.morePage,t.lastSysDate=n.details[n.details.length-1].SysDate,t.lastSysTime=n.details[n.details.length-1].SysTime,t.lastTransSeq=n.details[n.details.length-1].TranSeq,console.log(t.lastSysDate),console.log(t.lastSysTime),console.log(t.lastTransSeq),t.count=n.count,t.$toast(n.retMsg)):t.$toast(n.retMsg);case 7:case"end":return e.stop()}}),e)})))()},onConfirm:function(t){var e=Object(bt["a"])(t,2),a=e[0],n=e[1];this.show=!1,this.startDate=this.formatDate(a),this.endDate=this.formatDate(n)},formatDate:function(t){return"".concat(t.getMonth()+1,"-").concat(t.getMonth()+1,"-").concat(t.getDate())},getBalance:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t,a={transCode:"ACCOUNTINFO",mobileNo:localStorage.getItem("phone")||"",cardNo:localStorage.getItem("CardNo")||"",cardPin:t.pwd},e.next=4,t.$api.sendMs(a);case 4:n=e.sent,t.getLists(),console.log(n),"SUCCESS"==n.retCode?(t.cardBalance=n.CardBalance,console.log(t.cardBalance)):t.$dialog.alert({title:"错误",message:n.retMsg}).then((function(){t.$router.go(-1)}));case 8:case"end":return e.stop()}}),e)})))()}}}),Ct=wt,xt=(a("f273"),Object(l["a"])(Ct,gt,vt,!1,null,"1df5982e",null)),St=xt.exports,Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"balance"},[a("pheader",{attrs:{back:!0,title:"充值记录"}}),t._m(0)],1)},yt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lists"},[n("h3",[t._v("充值记录")]),n("div",{staticClass:"list"},[n("div",{staticClass:"listlb"},[n("img",{attrs:{src:a("ada6")}}),n("div",{staticClass:"listl"},[n("p",[t._v("微信充值")]),n("span",[t._v("11月5日11:20")])])]),n("div",{staticClass:"listr"},[t._v(" -15 ")])]),n("div",{staticClass:"list"},[n("div",{staticClass:"listlb"},[n("img",{attrs:{src:a("ada6")}}),n("div",{staticClass:"listl"},[n("p",[t._v("微信充值")]),n("span",[t._v("11月5日11:20")])])]),n("div",{staticClass:"listr"},[t._v(" -15 ")])]),n("div",{staticClass:"list"},[n("div",{staticClass:"listlb"},[n("img",{attrs:{src:a("4d0e")}}),n("div",{staticClass:"listl"},[n("p",[t._v("支付宝充值")]),n("span",[t._v("11月5日11:20")])])]),n("div",{staticClass:"listr color"},[t._v(" +15 ")])])])}],_t={name:"balance",components:{},data:function(){return{num:1}},created:function(){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{}},kt=_t,$t=(a("2f2b"),Object(l["a"])(kt,Dt,yt,!1,null,"465d8a44",null)),It=$t.exports,Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"recharge"},[n("pheader",{attrs:{back:!0,title:"充值",right:"充值记录"},on:{rightFn:t.righFn}}),n("div",{staticClass:"count"},[n("p",{staticClass:"tit"},[t._v("充值金额")]),n("div",{staticClass:"ipt"},[n("span",[t._v("¥")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.num,expression:"num"}],attrs:{type:"tel",name:"",id:"",value:""},domProps:{value:t.num},on:{input:function(e){e.target.composing||(t.num=e.target.value)}}})]),n("div",{staticClass:"btns"},t._l(t.btns,(function(e,a){return n("div",{key:a,staticClass:"btn",class:t.btnac==a?"active":"",on:{click:function(n){return t.numFn(e,a)}}},[t._v(" "+t._s(e.num)+"元 ")])})),0)]),n("p",{staticClass:"tit",staticStyle:{color:"#999999"}},[t._v("请选择充值方式")]),n("div",{staticClass:"lists"},[n("div",{staticClass:"list",on:{click:function(e){t.payth=0}}},[t._m(0),n("div",{staticClass:"listr",class:0==t.payth?"listrac":""},[0==t.payth?n("img",{attrs:{src:a("8ecc")}}):t._e()])])]),n("div",{staticClass:"bom",on:{click:function(e){return t.rechargeFn()}}},[t._v(" 下一步 ")]),n("van-dialog",{attrs:{showConfirmButton:!1,closeOnClickOverlay:!0,title:"需要微信代扣签约",showCancelButton:!1},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("div",{staticStyle:{padding:"3vw"}},[n("div",{staticStyle:{"text-align":"center","font-size":"20px",padding:"3vw 0"}},[n("p",[t._v("您需要先进行微信代扣签约，才能进行充值，")]),n("p",[t._v("请截屏保存二维码，在微信内扫码识别进行签约")])]),t.ContractCode?n("div",{ref:"qrCodeDiv",staticClass:"code qrcodeImg",staticStyle:{margin:"auto"}}):t._e()])])],1)},Ot=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"listl"},[n("img",{attrs:{src:a("ada6")}}),n("span",[t._v("微信充值")])])}],Tt=(a("51b3"),a("d3af"),{name:"recharge",components:{},data:function(){return{num:50,btnac:0,btns:[{num:"50"},{num:"100"},{num:"200"},{num:"500"},{num:"1000"},{num:"2000"}],payth:0,phone:"",cardNo:"",ContractCode:"",show:!1}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.phone=t.$store.state.phone||localStorage.getItem("phone")||"",t.phone=Number(t.phone),t.cardNo=localStorage.getItem("CardNo")||"";case 3:case"end":return e.stop()}}),e)})))()},watch:{num:function(t,e){if(this.btnac=-1,this.num){this.num=this.num.replace(/[^\d.]/g,""),this.num=this.num.replace(/^\./g,""),this.num=this.num.replace(/\.{2,}/g,"."),this.num=this.num.replace(".","$#$").replace(/\./g,"").replace("$#$","."),this.num=this.num.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3");for(var a=0;a<this.btns.length;a++)this.num==this.btns[a].num&&(this.btnac=a)}else this.num=""}},methods:{rechargeFn:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$toast.loading({message:"充值中,请稍后...",forbidClick:!0,duration:0}),a={transCode:"CARDREFUND",mobileNo:t.phone?JSON.stringify(t.phone):"",cardNo:t.cardNo,amount:JSON.stringify(100*t.num)},console.log(a),e.next=5,t.$api.reqFn(a);case 5:n=e.sent,console.log(n),"NEEDCONTRACT"==n.retCode?(t.ContractCode=n.ContractCode,t.show=!0,t.$nextTick((function(){this.bindQRCode()}))):"SUCCESS"==n.retCode?(s=(n.balance/100).toFixed(2),t.$dialog.alert({title:"充值成功",message:"充值成功，当前卡号余额："+s+" 元"}).then((function(){}))):t.$dialog.alert({title:"充值错误",message:"retCode："+n.retCode+" <br/>,retMsg："+n.retMsg}).then((function(){}));case 8:case"end":return e.stop()}}),e)})))()},bindQRCode:function(){this.$refs.qrCodeDiv.innerHTML="",this.QRCodeObj=new N.a(this.$refs.qrCodeDiv,{text:this.ContractCode,width:160,height:160,colorDark:"#333333",colorLight:"#ffffff",correctLevel:N.a.CorrectLevel.L})},numFn:function(t,e){this.num=t.num,this.btnac=e},righFn:function(){this.$router.push({path:"/rechargelist"})}}}),Et=Tt,Rt=(a("6973"),Object(l["a"])(Et,Nt,Ot,!1,null,"7d0a4af6",null)),Pt=Rt.exports,jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"set"},[a("pheader",{attrs:{title:"设置",back:!0}}),a("div",{staticClass:"navs"},[a("div",{staticClass:"nav",on:{click:function(e){return t.goSetpwdl()}}},[t._m(0),t._m(1)]),a("div",{staticClass:"nav",on:{click:function(e){return t.golimit()}}},[t._m(2),t._m(3)])])],1)},Bt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"navl"},[a("span",[t._v("密码设置")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("img",{staticClass:"r",attrs:{src:a("b4ec")}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"navl"},[a("span",[t._v("消费限额")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("img",{staticClass:"r",attrs:{src:a("b4ec")}})])}],Ft={name:"set",components:{},data:function(){return{}},created:function(){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{goSetpwdl:function(){this.$router.push({path:"/setpwdl"})},golimit:function(){this.$router.push({path:"/limit"})}}},At=Ft,Lt=(a("92b8"),Object(l["a"])(At,jt,Bt,!1,null,"3f43df74",null)),Mt=Lt.exports,Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"set"},[a("pheader",{attrs:{title:"消费限额",back:!0}}),a("div",{staticClass:"navs"},[a("div",{staticClass:"nav"},[t._m(0),a("div",{staticClass:"navr"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.num,expression:"num"}],attrs:{type:"",name:"",id:"",value:"",placeholder:"请输入消费限制金额"},domProps:{value:t.num},on:{input:function(e){e.target.composing||(t.num=e.target.value)}}})])])]),a("div",{staticClass:"btn"},[t._v(" 完成 ")])],1)},qt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"navl"},[a("span",[t._v("消费限额")])])}],zt={name:"limit",components:{},data:function(){return{num:"",data:"abs"}},watch:{num:function(t,e){console.log(this.num),this.num?this.num=parseInt(this.num):this.num=""}},created:function(){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:({xid:123,pageSize:20,type:1,pageNo:"",obj:{id:1},arr:[2,3,5]});case 1:case"end":return t.stop()}}),t)})))()},methods:{}},Jt=zt,Kt=(a("438d"),Object(l["a"])(Jt,Ut,qt,!1,null,"7a13a38c",null)),Wt=Kt.exports,Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"consume"},[n("pheader",{attrs:{title:"消费明细",back:!0}}),n("div",{staticClass:"count"},[n("div",{staticClass:"navs"},[n("div",{staticClass:"navsl"},[n("div",{staticClass:"nav",class:2==t.navac?"active":"",on:{click:function(e){return t.changeType(2)}}},[t._v("消费")]),n("div",{staticClass:"nav",class:1==t.navac?"active":"",on:{click:function(e){return t.changeType(1)}}},[t._v("充值")]),n("div",{staticClass:"nav",class:0==t.navac?"active":"",on:{click:function(e){return t.changeType(0)}}},[t._v("所有")])]),n("div",{staticClass:"timesel",on:{click:function(e){return t.showsheet()}}},[n("span",[t._v("近三个月")]),n("img",{attrs:{src:a("4ee8")}})])]),n("div",{staticClass:"lists"},[t._l(t.list,(function(e,a){return n("div",{key:a,staticClass:"list"},[n("div",{staticClass:"listl"},[n("p",[t._v(t._s(e.TranDesc))]),n("span",[t._v(t._s(e.TranDate)+"----"+t._s(e.TranTime))])]),n("div",{staticClass:"listr",class:e.AmtTrans.indexOf("+")>=0?"color":""},[t._v(" "+t._s(e.AmtTrans.indexOf("+")>=0?"+":"-")+t._s(e.AmtTrans/100)+" ")])])})),n("div",{staticStyle:{padding:"20px","text-align":"center"}},["1"==t.morePage?n("span",{on:{click:function(e){return t.getLists()}}},[t._v("查看更多")]):n("span",[t._v("暂无更多")])])],2)]),n("van-action-sheet",{attrs:{actions:t.actions,"cancel-text":"取消",round:""},on:{cancel:t.toCancel,select:t.onSelect},model:{value:t.showdateType,callback:function(e){t.showdateType=e},expression:"showdateType"}}),n("van-calendar",{attrs:{"min-date":t.minDate,"max-date":t.maxDate,type:"range"},on:{confirm:t.onConfirm},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],1)},Vt=[],Yt={name:"consume",components:{},data:function(){return{minDate:new Date(2020,0,1),maxDate:new Date(2100,0,31),showdateType:!1,show:!1,actions:[{name:"近三个月",type:"",startDate:this.getBeforeDate(90),endDate:this.getBeforeDate(0)},{name:"近半年",type:"",startDate:this.getBeforeDate(180),endDate:this.getBeforeDate(0)},{name:"近一年",type:"",startDate:this.getBeforeDate(360),endDate:this.getBeforeDate(0)},{name:"范围查询",type:"diy",subname:"手动选择日期范围"}],navac:2,startDate:"",endDate:"",morePage:"",lastSysDate:"",lastSysTime:"",lastTransSeq:"",list:[]}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.startDate=t.getBeforeDate(30),t.endDate=t.getBeforeDate(0),t.getLists();case 3:case"end":return e.stop()}}),e)})))()},methods:{showsheet:function(){this.showdateType=!0},onSelect:function(t){console.log(t),this.showdateType=!1,"diy"==t.type?this.show=!0:(this.startDate=t.startDate,this.endDate=t.endDate,this.lastSysDate="",this.lastSysTime="",this.lastTransSeq="",this.morePage="",this.list=[],this.getLists()),this.$toast({message:t.name,duration:500})},toCancel:function(){},onConfirm:function(t){var e=Object(bt["a"])(t,2),a=e[0],n=e[1];console.log(t),this.show=!1,this.startDate=this.formatDate(a),this.endDate=this.formatDate(n),this.list=[],this.getLists()},formatDate:function(t){var e=t.getFullYear(),a=t.getMonth()+1,n=(t=t.getDate(),"".concat(e).concat(a<10?"0"+a:a).concat(t<10?"0"+t:t));return n},getLists:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t,a={transCode:"ACCOUNTDETAIL",mobileNo:localStorage.getItem("phone")||"",cardNo:localStorage.getItem("CardNo")||"",startDate:t.startDate,endDate:t.endDate,morePage:t.morePage,lastSysDate:t.lastSysDate,lastSysTime:t.lastSysTime,lastTransSeq:t.lastTransSeq},e.next=4,t.$api.sendMs(a);case 4:n=e.sent,console.log(n),"SUCCESS"==n.retCode?(n.details&&(t.list=t.list.concat(n.details),t.lastSysDate=n.details[n.details.length-1].SysDate,t.lastSysTime=n.details[n.details.length-1].SysTime,t.lastTransSeq=n.details[n.details.length-1].TranSeq),t.morePage=n.morePage,console.log(t.lastSysDate),console.log(t.lastSysTime),console.log(t.lastTransSeq),t.count=n.count,t.$toast(n.retMsg)):t.$toast(n.retMsg);case 7:case"end":return e.stop()}}),e)})))()},goDetaiil:function(){this.$router.push({path:"/consumedetail"})},changeType:function(t){this.navac=t},golimit:function(){this.$router.push({path:"/limit"})}}},Qt=Yt,Gt=(a("a261"),Object(l["a"])(Qt,Ht,Vt,!1,null,"37d678e4",null)),Xt=Gt.exports,Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"consume"},[a("pheader",{attrs:{title:"消费详情",back:!0}}),t._m(0)],1)},te=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"count"},[a("div",{staticClass:"ctop"},[a("p",{staticClass:"tit"},[t._v("消费-小卖部")]),a("h3",{staticClass:"num"},[t._v("-0.99")])]),a("div",[a("div",{staticClass:"lists"},[a("div",{staticClass:"list"},[a("span",[t._v("交易类型")]),a("p",[t._v("消费")])]),a("div",{staticClass:"list"},[a("span",[t._v("交易时间")]),a("p",[t._v("2021-9-3 11:19:19")])]),a("div",{staticClass:"list"},[a("span",[t._v("交易单号")]),a("p",[t._v("100008999887654654")])])])])])}],ee={name:"consumedetail",components:{},data:function(){return{}},created:function(){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{golimit:function(){this.$router.push({path:"/limit"})}}},ae=ee,ne=(a("5f76"),Object(l["a"])(ae,Zt,te,!1,null,"d5481276",null)),se=ne.exports,re=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"opencard",attrs:{id:"opencard"}},[n("pheader",{attrs:{title:"开卡",back:!0}}),n("div",{staticClass:"count"},[n("div",{staticClass:"temps"},[n("div",{staticClass:"temp"},[n("div",{staticClass:"tempt",class:0==t.temp?"active":""},[t.temp>0?n("span",[n("img",{attrs:{src:a("8ecc")}})]):t._e(),0==t.temp?n("span",{staticClass:"circle"}):t._e()]),n("span",{staticClass:"text",class:{textold:t.temp>0,textac:0==t.temp}},[t._v("信息录入")])]),t._m(0),n("div",{staticClass:"temp"},[n("div",{staticClass:"tempt",class:1==t.temp?"active":""},[t.temp>1?n("span",[n("img",{attrs:{src:a("8ecc")}})]):t._e(),1==t.temp?n("span",{staticClass:"circle"}):t._e(),0==t.temp?n("span",{staticClass:"next"}):t._e()]),n("span",{staticClass:"text",class:{textold:t.temp>1,textac:1==t.temp}},[t._v("证件上传")])]),t._m(1),n("div",{staticClass:"temp"},[n("div",{staticClass:"tempt",class:2==t.temp?"active":""},[t.temp>2?n("span",[n("img",{attrs:{src:a("8ecc")}})]):t._e(),2==t.temp?n("span",{staticClass:"circle"}):t._e(),t.temp<2?n("span",{staticClass:"next"}):t._e()]),n("span",{staticClass:"text",class:{textold:t.temp>2,textac:2==t.temp}},[t._v("激活")])]),t._m(2),n("div",{staticClass:"temp"},[n("div",{staticClass:"tempt",class:3==t.temp?"active":""},[t.temp>3?n("span",[n("img",{attrs:{src:a("8ecc")}})]):t._e(),3==t.temp?n("span",{staticClass:"circle"}):t._e(),t.temp<3?n("span",{staticClass:"next"}):t._e()]),n("span",{staticClass:"text",class:{textold:t.temp>3,textac:3==t.temp}},[t._v("完成")])])]),n("div",{staticClass:"cBox"},[0==t.temp?n("div",{},[n("div",{staticClass:"lists"},[n("div",{staticClass:"list"},[n("span",{staticClass:"listl"},[t._v("手机号")]),n("div",{staticClass:"listr"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.phone,expression:"formData.phone"}],attrs:{placeholder:"请输入手机号",type:"tel"},domProps:{value:t.formData.phone},on:{input:function(e){e.target.composing||t.$set(t.formData,"phone",e.target.value)}}})])]),n("div",{staticClass:"list"},[n("span",{staticClass:"listl"},[t._v("姓名")]),n("div",{staticClass:"listr"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],attrs:{placeholder:"请输入姓名",type:"text"},domProps:{value:t.formData.name},on:{input:function(e){e.target.composing||t.$set(t.formData,"name",e.target.value)}}})])]),n("div",{staticClass:"list"},[n("span",{staticClass:"listl"},[t._v("性别")]),n("div",{staticClass:"listr"},[n("van-radio-group",{attrs:{direction:"horizontal"},model:{value:t.formData.gender,callback:function(e){t.$set(t.formData,"gender",e)},expression:"formData.gender"}},[n("van-radio",{attrs:{"checked-color":"#ee0a24",name:"M"}},[t._v("男")]),n("van-radio",{attrs:{"checked-color":"#ee0a24",name:"F"}},[t._v("女")])],1)],1)]),n("div",{staticClass:"list"},[n("span",{staticClass:"listl"},[t._v("职业")]),n("div",{staticClass:"listr"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.userOccupation,expression:"formData.userOccupation"}],attrs:{name:"userOccupation"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.formData,"userOccupation",e.target.multiple?a:a[0])}}},[n("option",{attrs:{value:"24"}},[t._v("教学人员")]),n("option",{attrs:{value:"Y1"}},[t._v("学生")]),n("option",{attrs:{value:"Y9"}},[t._v("其他从业")])])])]),n("div",{staticClass:"list"},[n("span",{staticClass:"listl"},[t._v("国籍")]),n("div",{staticClass:"listr"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.countryCode,expression:"formData.countryCode"}],attrs:{name:"countryCode"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.formData,"countryCode",e.target.multiple?a:a[0])}}},[n("option",{attrs:{value:"156"}},[t._v("中国")])])])]),n("div",{staticClass:"list",on:{click:function(e){t.showcardnum=!0}}},[n("span",{staticClass:"listl"},[t._v("身份证号")]),n("div",{staticClass:"listr"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.cardnum,expression:"formData.cardnum"}],attrs:{readonly:"readonly",placeholder:"请输入身份证号",type:"text"},domProps:{value:t.formData.cardnum},on:{input:function(e){e.target.composing||t.$set(t.formData,"cardnum",e.target.value)}}})])]),n("van-number-keyboard",{attrs:{show:t.showcardnum,maxlength:18,"extra-key":"X","close-button-text":"完成"},on:{blur:function(e){t.showcardnum=!1},input:t.onInput,delete:t.onDelete},model:{value:t.formData.cardnum,callback:function(e){t.$set(t.formData,"cardnum",e)},expression:"formData.cardnum"}}),n("div",{staticClass:"list"},[n("span",{staticClass:"listl"},[t._v("身份证是否长期")]),n("div",{staticClass:"listr"},[n("vswitch",{staticClass:"vswitch",attrs:{value:t.value,FId:t.FId,index:t.index,handle:!0},on:{changeSwitch:t.changeSwitch}})],1)]),n("div",{staticClass:"list",on:{click:function(e){return t.showTimerFN("idCardIssueDate")}}},[n("span",{staticClass:"listl"},[t._v("证件签发日")]),n("div",{staticClass:"listr",staticStyle:{position:"relative"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.idCardIssueDate,expression:"formData.idCardIssueDate"}],staticStyle:{width:"50vw",display:"block",background:"none","line-height":"40px"},attrs:{readonly:"readonly",placeholder:"请选择证件签发日",type:""},domProps:{value:t.formData.idCardIssueDate},on:{input:function(e){e.target.composing||t.$set(t.formData,"idCardIssueDate",e.target.value)}}})])]),"1"!=t.formData.idNeverExpired?n("div",{staticClass:"list",on:{click:function(e){return t.showTimerFN("idCardExpDate")}}},[n("span",{staticClass:"listl"},[t._v("证件到期日")]),n("div",{staticClass:"listr",staticStyle:{position:"relative"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.idCardExpDate,expression:"formData.idCardExpDate"}],staticStyle:{width:"50vw",display:"block",background:"none","line-height":"40px"},attrs:{readonly:"readonly",placeholder:"请选择证件到期日",type:""},domProps:{value:t.formData.idCardExpDate},on:{input:function(e){e.target.composing||t.$set(t.formData,"idCardExpDate",e.target.value)}}})])]):t._e(),n("div",{staticClass:"list",on:{click:function(e){t.formData.type="idcard"}}},[n("span",{staticClass:"listl"},[t._v("凭身份证开卡")]),n("div",{staticClass:"listr"},[n("span",{staticClass:"circle",class:"idcard"==t.formData.type?"circleac":""},["idcard"==t.formData.type?n("img",{attrs:{src:a("8ecc")}}):t._e()])])]),n("div",{staticClass:"list",on:{click:function(e){t.formData.type="one"}}},[n("span",{staticClass:"listl"},[t._v("凭本人一类卡开卡")]),n("div",{staticClass:"listr"},[n("span",{staticClass:"circle",class:"idcard"==t.formData.type?"":"circleac"},["idcard"!=t.formData.type?n("img",{attrs:{src:a("8ecc")}}):t._e()])])])],1)]):t._e(),1==t.temp?n("div",["idcard"==t.formData.type?n("div",{staticClass:"zjBox"},[n("div",{staticClass:"idcardBox",staticStyle:{position:"relative"}},[t.formData.idPhotoFront?n("img",{staticStyle:{width:"95%",height:"90%","border-radius":"10px"},attrs:{src:t.formData.idPhotoFront}}):n("img",{staticClass:"cam",attrs:{src:a("c4bd")}}),n("div",{staticStyle:{position:"absolute",left:"0",right:"0",top:"0",bottom:"0",display:"flex","align-items":"center","justify-content":"center",opacity:"0"}},[n("van-uploader",{staticStyle:{width:"100%",height:"100%"},attrs:{name:"file","after-read":t.afterRead,"max-size":6144e3},on:{oversize:t.onOversize}})],1)]),n("div",{staticClass:"idcardBox idcardBoxf",staticStyle:{position:"relative"}},[t.formData.idPhotoBack?n("img",{staticStyle:{width:"95%",height:"90%","border-radius":"10px"},attrs:{src:t.formData.idPhotoBack}}):n("img",{staticClass:"cam",attrs:{src:a("c4bd")}}),n("div",{staticStyle:{position:"absolute",left:"0",right:"0",top:"0",bottom:"0",display:"flex","align-items":"center","justify-content":"center",opacity:"0"}},[n("van-uploader",{staticStyle:{width:"100%",height:"100%"},attrs:{"after-read":t.afterRead1,"max-size":6144e3},on:{oversize:t.onOversize}})],1)])]):n("div",[t._m(3),n("div",[n("div",{staticClass:"list"},[n("span",{staticClass:"listl"},[t._v("银行卡号")]),n("div",{staticClass:"listr"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.onecardnum,expression:"formData.onecardnum"}],attrs:{placeholder:"请输入一类卡卡号",type:"text"},domProps:{value:t.formData.onecardnum},on:{input:function(e){e.target.composing||t.$set(t.formData,"onecardnum",e.target.value)}}})])])])])]):t._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:2==t.temp,expression:"temp == 2"}]},[n("div",{staticClass:"jhBox"},[n("div",{staticClass:"list"},[n("span",{staticClass:"listl"},[t._v("设置交易密码")]),n("div",{staticClass:"listr",attrs:{id:"pas1"}},[n("div",{staticStyle:{width:"100%","text-align":"right"},attrs:{id:"areaNumber"+t.pwdid}},[n("div",{staticStyle:{width:"100%",height:"33px","line-height":"33px","text-indent":"0.5em","font-family":"微软雅黑,黑体",outline:"none"},attrs:{id:"numberInput"+t.pwdid,diasbled:"",placeholder:"请输入6位数字的交易密码",tabIndex:"1",kbdtype:"Number",action:"/PasswordServlet","modulus-hex":"a974e94429df917231eb905d71ec0386be6120c3132cebed6c932c55444d781b43f0616be8d19b9ad4e4e9e9762f384dd1fb4b81fee947a9b6c09966ee3d8f7efff035cb13528e0862641eb744a64aa91208ffa53c9f11df7293a50814c9e75c631604fe90caa91c78d8f2250ebd489451f3d20fdb8f6dc1e49e88555eb80fdd",readonly:"readonly"}})])])]),n("div",{staticClass:"list"},[n("span",{staticClass:"listl"},[t._v("确认密码")]),n("div",{staticClass:"listr",attrs:{id:"pas2"}},[n("div",{staticStyle:{width:"100%","text-align":"right"},attrs:{id:"areaNumber2"+t.pwdid}},[n("div",{staticStyle:{width:"100%",height:"33px","line-height":"33px","text-indent":"0.5em","font-family":"微软雅黑,黑体",outline:"none"},attrs:{id:"numberInput2"+t.pwdid,placeholder:"请输入6位数字的交易密码",tabIndex:"1",kbdtype:"Number",action:"/PasswordServlet","modulus-hex":"a974e94429df917231eb905d71ec0386be6120c3132cebed6c932c55444d781b43f0616be8d19b9ad4e4e9e9762f384dd1fb4b81fee947a9b6c09966ee3d8f7efff035cb13528e0862641eb744a64aa91208ffa53c9f11df7293a50814c9e75c631604fe90caa91c78d8f2250ebd489451f3d20fdb8f6dc1e49e88555eb80fdd",readonly:"readonly"}})])])]),n("div",{staticClass:"list"},[n("span",{staticClass:"listl"},[t._v("手机号")]),n("div",{staticClass:"listr"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.phone,expression:"formData.phone"}],attrs:{placeholder:"请输入手机号",type:"text"},domProps:{value:t.formData.phone},on:{input:function(e){e.target.composing||t.$set(t.formData,"phone",e.target.value)}}})])]),n("div",{staticClass:"list"},[n("span",{staticClass:"listl"},[t._v("验证码")]),n("div",{staticClass:"listr"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.code,expression:"formData.code"}],attrs:{placeholder:"请输入验证码",type:"text"},domProps:{value:t.formData.code},on:{input:function(e){e.target.composing||t.$set(t.formData,"code",e.target.value)}}}),n("div",{staticClass:"code",class:t.issend?"send":"",on:{click:function(e){return t.getCode()}}},[t._v(" "+t._s(t.codeText)+" ")])])])])]),3==t.temp?n("div",{staticClass:"kkBox"},[t.iserror?n("div",{staticClass:"error"},[n("img",{attrs:{src:a("7660")}}),n("p",[t._v("很遗憾！激活失败!")])]):n("div",[n("img",{attrs:{src:a("57d8")}}),n("p",[t._v("恭喜！已成功激活!")])])]):t._e()]),t.iserror&&3==t.temp?n("div",[n("div",{staticClass:"btn",on:{click:function(e){return t.againFn()}}},[t._v(" 再次激活 ")]),n("div",{staticClass:"btn",staticStyle:{"margin-top":"20px",background:"white",color:"#D93025",border:"1px solid #D93025"},on:{click:function(e){return t.backhome()}}},[t._v(" 返回首页 ")])]):n("div",[n("div",{staticClass:"btn",class:2==t.temp&&t.canClick?"canClick":"noclick",on:{click:function(e){return t.nextFn()}}},[t._v(" "+t._s(0==t.temp?"下一步":"")+" "+t._s(1==t.temp?"下一步":"")+" "+t._s(2==t.temp?"完成":"")+" "+t._s(3==t.temp?"完成":"")+" ")])])]),n("div",[n("van-popup",{attrs:{position:"bottom"},model:{value:t.showTimer,callback:function(e){t.showTimer=e},expression:"showTimer"}},[n("van-datetime-picker",{attrs:{type:"date",title:"选择年月日","min-date":t.minDate,"max-date":t.maxDate,formatter:t.formatter},on:{cancel:function(e){t.showTimer=!1},confirm:t.confirmTime},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1)],1),n("div",[t.showImg?n("div",{staticStyle:{height:"100vh",width:"100vw",position:"fixed",top:"0",bottom:"0",right:"0","z-index":"999999",background:"white"}},[n("croptep",{attrs:{imgSrc:t.imgSrc},on:{cancelCut:t.cancelCut,sureCut:t.sureCut}})],1):t._e()])],1)},ie=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"line"},[a("div")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"line"},[a("div")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"line"},[a("div")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"idcardBox firstcard"},[n("div",{staticClass:"firstcardBox"},[n("img",{staticClass:"cam",attrs:{src:a("c4bd")}}),n("p",{staticClass:"firstcardText"},[t._v("上传本人一类卡")])])])}],oe=(a("acc0"),a("89a8"),a("b110"),a("fe35"),a("7216"),a("609b"),a("8fec"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"100%",display:"flex","flex-direction":"column",overflow:"hidden"}},[t._m(0),a("div",{staticStyle:{flex:"1"}},[a("vue-cropper",{ref:"cropper",staticStyle:{width:"100vw",height:"100%"},attrs:{mode:"100% auto",img:t.option.img,outputSize:t.option.size,outputType:t.option.outputType,fixedNumber:t.option.fixedNumber,fixed:t.option.fixed,info:!0,full:t.option.full,canMove:t.option.canMove,canMoveBox:t.option.canMoveBox,original:t.option.original,autoCrop:t.option.autoCrop,autoCropWidth:t.option.autoCropWidth,autoCropHeight:t.option.autoCropHeight,fixedBox:t.option.fixedBox,infoTrue:t.option.infoTrue,centerBox:t.option.centerBox},on:{realTime:t.realTime,imgLoad:t.imgLoad,imgMoving:t.imgMoving}})],1),a("div",{staticStyle:{display:"flex","align-items":"center",padding:"3vw","justify-content":"space-around","padding-bottom":"15vw"}},[a("input",{staticClass:"oper",staticStyle:{height:"auto",width:"auto",margin:"3px 5px",padding:"0 5px"},attrs:{type:"button",value:"放大",title:"放大"},on:{click:function(e){return t.changeScale(1)}}}),a("input",{staticClass:"oper",staticStyle:{height:"auto",width:"auto",margin:"3px 5px",padding:"0 5px"},attrs:{type:"button",value:"缩小",title:"缩小"},on:{click:function(e){return t.changeScale(-1)}}}),a("input",{staticClass:"oper",staticStyle:{height:"auto",width:"auto",margin:"3px 5px",padding:"0 5px"},attrs:{type:"button",value:"旋转",title:"旋转"},on:{click:t.rotateRight}}),a("div",{staticStyle:{"font-size":"16px"},on:{click:function(e){return t.cancelCut()}}},[t._v(" 取消 ")]),a("div",{staticStyle:{"font-size":"16px"},on:{click:function(e){return t.sureCut()}}},[t._v(" 确定裁剪 ")])])])}),ce=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{padding:"5vw 3vw","text-align":"center"}},[a("p",{staticStyle:{"font-size":"20px"}},[t._v("请拖动或旋转裁图片至剪框选定证件边缘大小（裁剪框长宽比已固定）")])])}],le=a("2772"),de={name:"croptep",props:{imgSrc:{value:String,default:""}},data:function(){return{headImg:"",crap:!1,previews:{},option:{img:"",outputSize:1,full:!1,outputType:"png",canMove:!0,original:!1,canMoveBox:!1,autoCrop:!0,fixedNumber:[85.6,54],fixed:!0,fixedBox:!0,infoTrue:!1,centerBox:!0},fileName:"",downImg:"#",imgFile:"",uploadImgRelaPath:""}},created:function(){},mounted:function(){this.option.img=this.imgSrc,this.$nextTick((function(){})),this.$refs.cropper.startCrop()},methods:{changeScale:function(t){console.log("changeScale"),t=t||1,this.$refs.cropper.changeScale(t)},rotateLeft:function(){console.log("rotateLeft"),this.$refs.cropper.rotateLeft()},rotateRight:function(){console.log("rotateRight"),this.$refs.cropper.rotateRight()},finish:function(t){},realTime:function(t){this.previews=t},cancelCut:function(){this.$emit("cancelCut","")},sureCut:function(){var t=this;this.$refs.cropper.getCropData((function(e){t.$emit("sureCut",e)}))},down:function(t){var e=this;console.log("down");var a=document.createElement("a");a.download="author-img","blob"===t?this.$refs.cropper.getCropBlob((function(t){e.downImg=window.URL.createObjectURL(t),a.href=window.URL.createObjectURL(t),a.click()})):this.$refs.cropper.getCropData((function(t){console.log(t),e.downImg=t,a.href=t,a.click()}))},uploadImg:function(t,e){console.log("uploadImg");var a=this,n=t.target.files[0];if(a.fileName=n.name,!/\.(gif|jpg|jpeg|png|bmp|GIF|JPG|PNG)$/.test(t.target.value))return alert("图片类型必须是.gif,jpeg,jpg,png,bmp中的一种"),!1;var s=new FileReader;s.onload=function(t){var n;n="object"===Object(le["a"])(t.target.result)?window.URL.createObjectURL(new Blob([t.target.result])):t.target.result,1===e?a.option.img=n:2===e&&(a.example2.img=n)},s.readAsArrayBuffer(n)},imgMoving:function(t){console.log(t)},imgLoad:function(t){console.log("imgLoad"),console.log(t)}}},ue=de,pe=(a("e835"),Object(l["a"])(ue,oe,ce,!1,null,null,null)),me=pe.exports,fe=(a("5501"),{name:"opencard",components:{croptep:me},data:function(){return{curtType:"",imgSrc:"",showImg:!1,showTimer:!1,idcardDatetype:"idCardIssueDate",minDate:new Date(1800,0,1),maxDate:new Date(2100,10,1),currentDate:new Date,fileList:[],temp:0,iserror:!0,photoType:"",showcardnum:!1,formData:{phone:"",name:"",cardnum:"",idNeverExpired:"",idCardIssueDate:"",idCardExpDate:"",userOccupation:"",gender:"",countryCode:"156",type:"idcard",idPhotoFront:"",idPhotoBack:"",onecardnum:"",password:"",passwordagain:"",code:""},issend:!1,codeText:"发送验证码",timer:null,time:60,value:!1,FId:"123",index:0,userInfo:null,encpwd:"",smsOrder:"",orderNo:"",cardNo:"",pwdid:(new Date).getTime(),canClick:!1}},watch:{formData:{handler:function(t){t.phone?(t.phone.length,t.phone=parseInt(t.phone)):t.phone="",console.log(t)},deep:!0}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.userInfo={userId:localStorage.getItem("userId")||""},t.formData.phone=t.$store.state.phone||localStorage.getItem("phone")||"",t.cardNo=localStorage.getItem("CardNo")||"",t.formData.cardnum=localStorage.getItem("idcardnum")||"",t.formData.name=localStorage.getItem("userName")||"";case 5:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a="#numberInput"+t.pwdid,n="areaNumber"+t.pwdid,s="#numberInput2"+t.pwdid,r="areaNumber2"+t.pwdid,$(window).loadKBD(),$(a).click((function(){$(a).showKBD({areaId:n,pageId:"opencard",maxLen:6,cursor:!0,mask:!0})})),$(s).click((function(){$(s).showKBD({areaId:r,pageId:"opencard",maxLen:6,cursor:!0,mask:!0})}));case 7:case"end":return e.stop()}}),e)})))()},methods:{formatter:function(t,e){return"year"===t?e+"年":"month"===t?e+"月":"day"===t?e+"日":e},confirmTime:function(t){var e=t.getFullYear(),a=t.getMonth()+1,n=t.getDate(),s=t.getHours(),r=t.getMinutes();a>=1&&a<=9&&(a="0".concat(a)),n>=1&&n<=9&&(n="0".concat(n)),s>=0&&s<=9&&(s="0".concat(s)),r>=0&&r<=9&&(r="0".concat(r));var i="".concat(e,"-").concat(a,"-").concat(n);"idCardIssueDate"==this.idcardDatetype?this.formData.idCardIssueDate=i:"idCardExpDate"==this.idcardDatetype&&(this.formData.idCardExpDate=i),this.showTimer=!1,console.log(t)},showTimerFN:function(t){this.idcardDatetype=t,this.showTimer=!0},getsalCard:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,a.$toast.loading({message:"加载中...",forbidClick:!0}),n={transCode:"SALECARD1",mobileNo:t.formData.phone?JSON.stringify(t.formData.phone):"",userId:t.userInfo.userId,userName:t.formData.name,idCardNo:t.formData.cardnum,idCardIssueDate:t.formData.idCardIssueDate.replace(/-/g,""),idCardExpDate:"1"==t.formData.idNeverExpired?"":t.formData.idCardExpDate.replace(/-/g,""),idNeverExpired:t.formData.idNeverExpired,userOccupation:t.formData.userOccupation,gender:t.formData.gender},console.log(n),e.next=6,t.$api.reqFn(n);case 6:s=e.sent,t.$toast.clear(),console.log(s),"SUCCESS"==s.retCode?(t.temp+=1,t.cardNo=s.CardNo,localStorage.setItem("CardNo",s.CardNo)):t.$dialog.alert({title:s.retMsg});case 10:case"end":return e.stop()}}),e)})))()},register:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a={},t.$api.reqFn(a);case 2:case"end":return e.stop()}}),e)})))()},reset:function(){this.temp=0,this.temp=2,this.issend=!1,this.iserror=!0,this.codeText="发送验证码",clearInterval(this.timer),this.timer=null,this.tim=60,this.formData={phone:"",name:"",cardnum:"",idNeverExpired:"",idCardIssueDate:"",idCardExpDate:"",userOccupation:"",gender:"",countryCode:"156",type:"idcard",onecardnum:"",password:"",passwordagain:"",code:""},this.formData.phone=this.$store.state.phone||localStorage.getItem("phone")||"",this.cardNo=localStorage.getItem("CardNo")||"",this.formData.cardnum=localStorage.getItem("idcardnum")||"",this.formData.name=localStorage.getItem("userName")||""},changeSwitch:function(t){console.log(t),this.formData.idNeverExpired=t?1:""},getCode:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s,r,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t,t.formData.phone||t.$toast("请输入手机号"),n="#numberInput"+t.pwdid,s="numberInput"+t.pwdid,"areaNumber"+t.pwdid,r="#numberInput2"+t.pwdid,"areaNumber2"+t.pwdid,i=$(r).checkPWD(s),e.t0=i,e.next=1===e.t0?11:2===e.t0?12:3===e.t0?14:4===e.t0?16:5===e.t0?18:20;break;case 11:return e.abrupt("break",20);case 12:return t.$toast("密码输入不一致"),e.abrupt("return");case 14:return t.$toast("请输入确认密码"),e.abrupt("return");case 16:return t.$toast("请输入密码"),e.abrupt("return");case 18:return t.$toast("请输入密码和确认密码"),e.abrupt("return");case 20:return o=$(n).getKBD(),o?$.ajax({type:"POST",url:"https://online.gzekt.com/vcard/pwd/ValidServlet",async:!0,headers:{SESSIONID:localStorage.getItem("sessionid"),token:localStorage.getItem("sessionid")},data:{Password:o},dataType:"json",crossDomain:!0,success:function(t){console.log(t),0==t.retcode?(a.encpwd=t.encpwd,a.sendCode()):this.$toast(t.retmsg)}}):t.$toast("请输入密码"),e.abrupt("return");case 25:case"end":return e.stop()}}),e)})))()},sendCode:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="sms"+(new Date).getTime(),n={transCode:"RESETPASSWD1",smsOrder:a,mobileNo:JSON.stringify(t.formData.phone),userName:t.formData.name,idCardNo:t.formData.cardnum,cardNo:t.cardNo},localStorage.setItem("idcardnum",t.formData.cardnum),localStorage.setItem("userName",t.formData.name),e.next=6,t.$api.sendMs(n);case 6:if(s=e.sent,console.log(s),"SUCCESS"!=s.retCode){e.next=14;break}t.canClick=!0,t.orderNo=s.orderNo,t.smsOrder=a,e.next=16;break;case 14:return t.$toast(s.retMsg),e.abrupt("return");case 16:t.issend=!0,t.timer=setInterval((function(){t.time-=1,t.codeText=t.time+" s 重新发送",t.time<=0&&(clearInterval(t.timer),t.issend=!1,t.codeText="重新发送",t.time=60)}),1e3);case 18:case"end":return e.stop()}}),e)})))()},backhome:function(){this.$router.push({path:"/"})},againFn:function(){this.reset()},setPwd:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$toast.loading({message:"激活中...",forbidClick:!0}),a={transCode:"RESETPASSWD2",mobileNo:t.formData.phone?JSON.stringify(t.formData.phone):"",cardNo:t.cardNo,smsOrder:t.smsOrder,smsCode:t.formData.code,newCardPin:t.encpwd},console.log(a),e.next=5,t.$api.reqFn(a);case 5:n=e.sent,t.$toast.clear(),console.log(n),"SUCCESS"==n.retCode?(t.$toast("激活成功"),t.iserror=!1,t.temp+=1,s=t,t.$dialog.confirm({title:"绑定云闪付",message:"成功绑定后，可在云闪付APP中查看并使用该卡。"}).then((function(){s.bdysf()})).catch((function(){}))):(t.$toast(n.retMsg),t.iserror=!0,t.temp+=1);case 9:case"end":return e.stop()}}),e)})))()},bdysf:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={transCode:"BINDYSF",mobileNo:t.formData.phone?JSON.stringify(t.formData.phone):"",cardNo:t.cardNo},console.log(a),e.next=4,t.$api.reqFn(a);case 4:n=e.sent,"SUCCESS"==n.retCode&&t.$toast("绑定成功");case 6:case"end":return e.stop()}}),e)})))()},nextFn:function(){console.log(this.temp),0==this.temp?this.enterInfo():1==this.temp?this.upImgFn():2==this.temp?this.setPwd():3==this.temp&&this.backhome()},upImgFn:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.formData.idPhotoFront,n=t.formData.idPhotoBack,console.log(t.formData.idPhotoFront),console.log(t.formData.idPhotoBack),a=a.substring(a.indexOf("base64")+1,a.length),n=n.substring(n.indexOf("base64")+1,n.length),s={transCode:"UPLOADPHOTO",mobileNo:t.formData.phone?JSON.stringify(t.formData.phone):"",userId:t.userInfo.userId,userName:t.formData.name,idCardNo:t.formData.cardnum,photoType:t.photoType,idPhotoFront:a.slice(6),idPhotoBack:n.slice(6)},console.log(s),t.$toast.loading({message:"证件处理中",forbidClick:!0}),e.next=11,t.$api.reqFn(s);case 11:r=e.sent,console.log(r),"SUCCESS"==r.retCode?t.getsalCard():(t.$dialog.alert({message:r.retMsg}).then((function(){})),t.$toast(r.retMsg));case 14:case"end":return e.stop()}}),e)})))()},enterInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={transCode:"REALAUTH",mobileNo:t.formData.phone?JSON.stringify(t.formData.phone):"",userName:t.formData.name,idCardNo:t.formData.cardnum,idCardIssueDate:t.formData.idCardIssueDate.replace(/-/g,""),idCardExpDate:"1"==t.formData.idNeverExpired?"":t.formData.idCardExpDate.replace(/-/g,""),idNeverExpired:t.formData.idNeverExpired,userOccupation:t.formData.userOccupation,gender:t.formData.gender},console.log(a),e.next=4,t.$api.reqFn(a);case 4:n=e.sent,console.log(n),"SUCCESS"==n.retCode?(t.temp+=1,t.userInfo=n,localStorage.setItem("userId",n.userId),localStorage.setItem("realAuthLevel",n.realAuthLevel),localStorage.setItem("orderNo",n.orderNo),localStorage.setItem("frontSeq",n.frontSeq)):t.$toast(n.retMsg);case 7:case"end":return e.stop()}}),e)})))()},beforeRead:function(t){},tirggerFile:function(t){var e=t.target.files[0],a=URL.createObjectURL(e);console.log(e),console.log(a),this.imgPreview("front",e)},blobToBase64:function(t){return new Promise((function(e,a){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.readAsDataURL(t),n.onerror=function(){a(new Error("blobToBase64 error"))}}))},afterRead:function(t){console.log(t),t.file.type.indexOf("png")>=0?this.photoType="02":t.file.type.indexOf("jpg")>=0?this.photoType="01":t.file.type.indexOf("jpeg")>=0?this.photoType="03":t.file.type.indexOf("bmp")>=0&&(this.photoType="04"),this.cutImg("front",t.content)},afterRead1:function(t){console.log(t),this.cutImg("back",t.content)},cutImg:function(t,e){("front"==t||"back"==t)&&(this.curtType=t,this.imgSrc=e,this.showImg=!0)},cancelCut:function(){this.showImg=!1},sureCut:function(t){console.log(t);var e,a=this,n=this.curtType;if(this.showImg=!1,t.length<=81920)"front"==n?a.formData.idPhotoFront=t:"back"==n&&(a.formData.idPhotoBack=t);else{var s=new Image;s.src=t,s.onload=function(){var t=a.compress(s,e);"front"==n?a.formData.idPhotoFront=t:"back"==n&&(a.formData.idPhotoBack=t)}}},imgPreview:function(t,e){var a,n=this;if(e&&window.FileReader&&/^image/.test(e.type)){var s=new FileReader;s.readAsDataURL(e),s.onloadend=function(){var e=this.result,s=new Image;s.src=e,this.result.length<=81920?"front"==t?n.formData.idPhotoFront=e:"back"==t&&(n.formData.idPhotoBack=e):s.onload=function(){var e=n.compress(s,a);"front"==t?(n.formData.idPhotoFront=e,n.imgSrc=e,n.showImg=!0):"back"==t&&(n.formData.idPhotoBack=e)}}}},compress:function(t,e){var a,n,s=document.createElement("canvas"),r=s.getContext("2d"),i=document.createElement("canvas"),o=i.getContext("2d"),c=t.width,l=t.height;if((a=c*l/1e6)>1?(a=Math.sqrt(a),console.log(a),c/=a,l/=a):a=1,c=684.8,l=432,s.width=c,s.height=l,console.log(c),r.fillStyle="#fff",r.fillRect(0,0,s.width,s.height),(n=c*l/1e6)>1){n=~~(Math.sqrt(n)+1);var d=~~(c/n),u=~~(l/n);i.width=d,i.height=u,console.log(d);for(var p=0;p<n;p++)for(var m=0;m<n;m++)o.drawImage(t,p*d*a,m*u*a,d*a,u*a,0,0,d,u),r.drawImage(i,p*d,m*u,d,u)}else console.log("直接绘制"),r.drawImage(t,0,0,c,l);var f=1,h=this.downBl(f,s);return i.width=i.height=s.width=s.height=0,console.log("end:",h.length/1e3,"kb"),this.$toast(h.length/1e3,"kb"),h},downBl:function(t,e){var a=e.toDataURL("image/jpeg",t);return a.length>=8e4?(t-=.1,this.downBl(t,e)):a},onOversize:function(t){console.log(t),this.$toast("文件大小不能超过 6M")},onInput:function(t){console.log(t)},onDelete:function(t){console.log(t)}}}),he=fe,ge=(a("da8b"),Object(l["a"])(he,re,ie,!1,null,"3a91dab8",null)),ve=ge.exports,be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"set"},[a("pheader",{attrs:{title:"密码设置",back:!0}}),a("div",{staticClass:"navs"},[a("div",{staticClass:"nav",on:{click:function(e){return t.gosetpayPwd()}}},[t._m(0),t._m(1)]),a("div",{staticClass:"nav",on:{click:function(e){return t.goforgotpayPwd()}}},[t._m(2),t._m(3)]),a("div",{staticClass:"nav",on:{click:function(e){return t.gosetPwd()}}},[t._m(4),t._m(5)])])],1)},we=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"navl"},[a("span",[t._v("修改交易密码")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("img",{staticClass:"r",attrs:{src:a("b4ec")}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"navl"},[a("span",[t._v("重置交易密码")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("img",{staticClass:"r",attrs:{src:a("b4ec")}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"navl"},[a("span",[t._v("设置开机密码")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("img",{staticClass:"r",attrs:{src:a("b4ec")}})])}],Ce={name:"setpwdl",components:{},data:function(){return{}},created:function(){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{gosetPwd:function(){this.$router.push({path:"/setpwd"})},goforgotpayPwd:function(){this.$router.push({path:"/forgotpaypwd"})},gosetpayPwd:function(){this.$router.push({path:"/setpaypwd"})}}},xe=Ce,Se=(a("4528"),Object(l["a"])(xe,be,we,!1,null,"4aeae628",null)),De=Se.exports,ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"opencard",attrs:{id:"opencard"}},[a("pheader",{attrs:{title:t.title,back:!0}}),a("div",{staticClass:"count"},[a("div",[a("div",{staticClass:"jhBox"},[a("div",{staticClass:"list"},[a("span",{staticClass:"listl"},[t._v("旧交易密码")]),a("div",{staticClass:"listr",attrs:{id:"pas3"}},[a("div",{staticStyle:{width:"100%","text-align":"right"},attrs:{id:"areaNumber3"+t.pwdid}},[a("div",{staticStyle:{width:"100%",height:"33px","line-height":"33px","text-indent":"0.5em","font-family":"微软雅黑,黑体",outline:"none"},attrs:{id:"numberInput3"+t.pwdid,diasbled:"",placeholder:"请输入6位数字的交易密码",tabIndex:"1",kbdtype:"Number",action:"/PasswordServlet","modulus-hex":"a974e94429df917231eb905d71ec0386be6120c3132cebed6c932c55444d781b43f0616be8d19b9ad4e4e9e9762f384dd1fb4b81fee947a9b6c09966ee3d8f7efff035cb13528e0862641eb744a64aa91208ffa53c9f11df7293a50814c9e75c631604fe90caa91c78d8f2250ebd489451f3d20fdb8f6dc1e49e88555eb80fdd",readonly:"readonly"}})])])]),a("div",{staticClass:"list"},[a("span",{staticClass:"listl"},[t._v("新交易密码")]),a("div",{staticClass:"listr",attrs:{id:"pas1"}},[a("div",{staticStyle:{width:"100%","text-align":"right"},attrs:{id:"areaNumber"+t.pwdid}},[a("div",{staticStyle:{width:"100%",height:"33px","line-height":"33px","text-indent":"0.5em","font-family":"微软雅黑,黑体",outline:"none"},attrs:{id:"numberInput"+t.pwdid,diasbled:"",placeholder:"请输入6位数字的交易密码",tabIndex:"1",kbdtype:"Number",action:"/PasswordServlet","modulus-hex":"a974e94429df917231eb905d71ec0386be6120c3132cebed6c932c55444d781b43f0616be8d19b9ad4e4e9e9762f384dd1fb4b81fee947a9b6c09966ee3d8f7efff035cb13528e0862641eb744a64aa91208ffa53c9f11df7293a50814c9e75c631604fe90caa91c78d8f2250ebd489451f3d20fdb8f6dc1e49e88555eb80fdd",readonly:"readonly"}})])])]),a("div",{staticClass:"list"},[a("span",{staticClass:"listl"},[t._v("确认新密码")]),a("div",{staticClass:"listr",attrs:{id:"pas2"}},[a("div",{staticStyle:{width:"100%","text-align":"right"},attrs:{id:"areaNumber2"+t.pwdid}},[a("div",{staticStyle:{width:"100%",height:"33px","line-height":"33px","text-indent":"0.5em","font-family":"微软雅黑,黑体",outline:"none"},attrs:{id:"numberInput2"+t.pwdid,placeholder:"请输入6位数字的交易密码",tabIndex:"1",kbdtype:"Number",action:"/PasswordServlet","modulus-hex":"a974e94429df917231eb905d71ec0386be6120c3132cebed6c932c55444d781b43f0616be8d19b9ad4e4e9e9762f384dd1fb4b81fee947a9b6c09966ee3d8f7efff035cb13528e0862641eb744a64aa91208ffa53c9f11df7293a50814c9e75c631604fe90caa91c78d8f2250ebd489451f3d20fdb8f6dc1e49e88555eb80fdd",readonly:"readonly"}})])])]),a("div",{staticClass:"list"},[a("span",{staticClass:"listl"},[t._v("手机号")]),a("div",{staticClass:"listr"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.phone,expression:"formData.phone"}],attrs:{placeholder:"请输入手机号",type:"text"},domProps:{value:t.formData.phone},on:{input:function(e){e.target.composing||t.$set(t.formData,"phone",e.target.value)}}})])])])])]),a("div",{staticClass:"btn",on:{click:function(e){return t.sureSetPwd()}}},[t._v(" 确认修改 ")])],1)},_e=[],ke={name:"setpaypwd",components:{},data:function(){return{title:"修改交易密码",temp:0,iserror:!0,formData:{phone:"",name:"",cardnum:"",idNeverExpired:"",idCardIssueDate:"",idCardExpDate:"",userOccupation:"",gender:"",countryCode:"156",type:"idcard",idPhotoFront:"",idPhotoBack:"",onecardnum:"",password:"",passwordagain:"",code:""},issend:!1,codeText:"发送验证码",timer:null,time:60,value:!1,FId:"123",index:0,userInfo:null,encpwd:"",encpwd3:"",smsOrder:"",orderNo:"",cardNo:"",pwdid:(new Date).getTime()}},watch:{formData:{handler:function(t){t.phone?(t.phone.length,t.phone=parseInt(t.phone)):t.phone=""},deep:!0}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t.pwdid),t.cardNo=localStorage.getItem("CardNo")||"",t.formData.phone=t.$store.state.phone||localStorage.getItem("phone")||"";case 3:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s,r,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t.pwdid),t,a="#numberInput"+t.pwdid,n="areaNumber"+t.pwdid,s="#numberInput2"+t.pwdid,r="areaNumber2"+t.pwdid,i="#numberInput3"+t.pwdid,o="areaNumber3"+t.pwdid,$(window).loadKBD(),$(a).click((function(){$(a).showKBD({areaId:n,pageId:"opencard",maxLen:6,cursor:!0,mask:!0})})),$(s).click((function(){$(s).showKBD({areaId:r,pageId:"opencard",maxLen:6,cursor:!0,mask:!0})})),$(i).click((function(){$(i).showKBD({areaId:o,pageId:"opencard",maxLen:6,cursor:!0,mask:!0})}));case 12:case"end":return e.stop()}}),e)})))()},methods:{sureSetpayPwd:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={transCode:"CHGPASSWD",mobileNo:t.formData.phone?JSON.stringify(t.formData.phone):"",cardNo:t.cardNo,oldCardPin:t.encpwd3,newCardPin:t.encpwd},console.log(a),e.next=4,t.$api.reqFn(a);case 4:n=e.sent,console.log(n),"SUCCESS"==n.retCode?(t.$toast("修改成功"),setTimeout((function(){t.$router.go(-1)}),1500)):t.$toast(n.retMsg);case 7:case"end":return e.stop()}}),e)})))()},sureSetPwd:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getCode();case 1:case"end":return e.stop()}}),e)})))()},openKBD:function(){console.log(222),$("#numberInput").showKBD({areaId:"areaNumber",pageId:"page",maxLen:6,cursor:!0,mask:!1})},getCode:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s,r,i,o,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t,t.formData.phone||t.$toast("请输入手机号"),n="#numberInput"+t.pwdid,s="numberInput"+t.pwdid,"areaNumber"+t.pwdid,r="#numberInput2"+t.pwdid,"areaNumber2"+t.pwdid,i="#numberInput3"+t.pwdid,"areaNumber3"+t.pwdid,o=$(r).checkPWD(s),e.t0=o,e.next=1===e.t0?13:2===e.t0?14:3===e.t0?16:4===e.t0?18:5===e.t0?20:22;break;case 13:return e.abrupt("break",22);case 14:return t.$toast("密码输入不一致"),e.abrupt("return");case 16:return t.$toast("请输入确认密码"),e.abrupt("return");case 18:return t.$toast("请输入密码"),e.abrupt("return");case 20:return t.$toast("请输入密码和确认密码"),e.abrupt("return");case 22:return c=$(n).getKBD(),l=$(i).getKBD(),c?$.ajax({type:"POST",url:"https://online.gzekt.com/vcard/pwd/ValidServlet",async:!0,headers:{SESSIONID:localStorage.getItem("sessionid"),token:localStorage.getItem("sessionid")},data:{Password:l},dataType:"json",crossDomain:!0,success:function(t){console.log(t),0==t.retcode?(a.encpwd3=t.encpwd,$.ajax({type:"POST",url:"https://online.gzekt.com/vcard/pwd/ValidServlet",async:!0,headers:{SESSIONID:localStorage.getItem("sessionid"),token:localStorage.getItem("sessionid")},data:{Password:c},dataType:"json",crossDomain:!0,success:function(t){console.log(t),0==t.retcode?(a.encpwd=t.encpwd,console.log("旧密码"),console.log(a.encpwd3),console.log("新密码"),console.log(a.encpwd),a.sureSetpayPwd()):this.$toast(t.retmsg)}})):this.$toast(t.retmsg)}}):t.$toast("请输入密码"),e.abrupt("return");case 28:case"end":return e.stop()}}),e)})))()},sendCode:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="sms"+(new Date).getTime(),n={transCode:"RESETPASSWD1",smsOrder:a,mobileNo:JSON.stringify(t.formData.phone),userName:t.formData.name,idCardNo:t.formData.cardnum,cardNo:t.cardNo},e.next=4,t.$api.sendMs(n);case 4:if(s=e.sent,console.log(s),"SUCCESS"!=s.retCode){e.next=11;break}t.orderNo=s.orderNo,t.smsOrder=a,e.next=12;break;case 11:return e.abrupt("return");case 12:t.issend=!0,t.timer=setInterval((function(){t.time-=1,t.codeText=t.time+" s 重新发送",t.time<=0&&(clearInterval(t.timer),t.issend=!1,t.codeText="重新发送",t.time=60)}),1e3);case 14:case"end":return e.stop()}}),e)})))()}}},$e=ke,Ie=(a("3180"),Object(l["a"])($e,ye,_e,!1,null,"303cc092",null)),Ne=Ie.exports,Oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"opencard",attrs:{id:"opencard"}},[n("pheader",{attrs:{title:t.title,back:!0}}),0==t.temp?n("div",{staticClass:"count"},[n("div",[n("div",{staticClass:"jhBox"},[n("div",{staticClass:"list"},[n("span",{staticClass:"listl"},[t._v("新交易密码")]),n("div",{staticClass:"listr",attrs:{id:"pas1"}},[n("div",{staticStyle:{width:"100%","text-align":"right"},attrs:{id:"areaNumber"+t.pwdid}},[n("div",{staticStyle:{width:"100%",height:"33px","line-height":"33px","text-indent":"0.5em","font-family":"微软雅黑,黑体",outline:"none"},attrs:{id:"numberInput"+t.pwdid,diasbled:"",placeholder:"请输入6位数字的交易密码",tabIndex:"1",kbdtype:"Number",action:"/PasswordServlet","modulus-hex":"a974e94429df917231eb905d71ec0386be6120c3132cebed6c932c55444d781b43f0616be8d19b9ad4e4e9e9762f384dd1fb4b81fee947a9b6c09966ee3d8f7efff035cb13528e0862641eb744a64aa91208ffa53c9f11df7293a50814c9e75c631604fe90caa91c78d8f2250ebd489451f3d20fdb8f6dc1e49e88555eb80fdd",readonly:"readonly"}})])])]),n("div",{staticClass:"list"},[n("span",{staticClass:"listl"},[t._v("确认新密码")]),n("div",{staticClass:"listr",attrs:{id:"pas2"}},[n("div",{staticStyle:{width:"100%","text-align":"right"},attrs:{id:"areaNumber2"+t.pwdid}},[n("div",{staticStyle:{width:"100%",height:"33px","line-height":"33px","text-indent":"0.5em","font-family":"微软雅黑,黑体",outline:"none"},attrs:{id:"numberInput2"+t.pwdid,placeholder:"请输入6位数字的交易密码",tabIndex:"1",kbdtype:"Number",action:"/PasswordServlet","modulus-hex":"a974e94429df917231eb905d71ec0386be6120c3132cebed6c932c55444d781b43f0616be8d19b9ad4e4e9e9762f384dd1fb4b81fee947a9b6c09966ee3d8f7efff035cb13528e0862641eb744a64aa91208ffa53c9f11df7293a50814c9e75c631604fe90caa91c78d8f2250ebd489451f3d20fdb8f6dc1e49e88555eb80fdd",readonly:"readonly"}})])])]),n("div",{staticClass:"list"},[n("span",{staticClass:"listl"},[t._v("手机号")]),n("div",{staticClass:"listr"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.phone,expression:"formData.phone"}],attrs:{placeholder:"请输入手机号",type:"text"},domProps:{value:t.formData.phone},on:{input:function(e){e.target.composing||t.$set(t.formData,"phone",e.target.value)}}})])]),n("div",{staticClass:"list"},[n("span",{staticClass:"listl"},[t._v("验证码")]),n("div",{staticClass:"listr"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.code,expression:"formData.code"}],attrs:{placeholder:"请输入验证码",type:"text"},domProps:{value:t.formData.code},on:{input:function(e){e.target.composing||t.$set(t.formData,"code",e.target.value)}}}),n("div",{staticClass:"code",class:t.issend?"send":"",on:{click:function(e){return t.getCode()}}},[t._v(" "+t._s(t.codeText)+" ")])])])])])]):t._e(),0==t.temp?n("div",{staticClass:"btn",class:t.canClick?"canClick":"",on:{click:function(e){return t.sureSetPwd()}}},[t._v(" "+t._s(t.btnText)+" ")]):t._e(),t.activation&&3==t.temp?n("div",[n("div",{staticClass:"kkBox"},[t.iserror?n("div",{staticClass:"error"},[n("img",{attrs:{src:a("7660")}}),n("p",[t._v("很遗憾！激活失败!")])]):n("div",[n("img",{attrs:{src:a("57d8")}}),n("p",[t._v("恭喜！已成功激活!")])])]),n("div",{staticClass:"btn",staticStyle:{"margin-top":"20px"},on:{click:function(e){return t.backFn()}}},[t._v(" 返回 ")])]):t._e()],1)},Te=[],Ee={name:"setpaypwd",components:{},data:function(){return{title:"忘记交易密码",btnText:"确认修改",temp:0,iserror:!1,formData:{phone:"",name:"",cardnum:"",idNeverExpired:"",idCardIssueDate:"",idCardExpDate:"",userOccupation:"",gender:"",countryCode:"156",type:"idcard",idPhotoFront:"",idPhotoBack:"",onecardnum:"",password:"",passwordagain:"",code:""},issend:!1,codeText:"发送验证码",timer:null,time:60,value:!1,FId:"123",index:0,userInfo:null,encpwd:"",encpwd3:"",smsOrder:"",orderNo:"",cardNo:"",activation:!1,pwdid:(new Date).getTime(),canClick:!1}},watch:{formData:{handler:function(t){t.phone?(t.phone.length,t.phone=parseInt(t.phone)):t.phone=""},deep:!0}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$route.query.type&&"activation"==t.$route.query.type&&(t.title="激活卡片",t.btnText="确认激活",t.activation=!0),t.cardNo=localStorage.getItem("CardNo")||"",t.formData.name=localStorage.getItem("userName")||"",t.formData.cardnum=localStorage.getItem("idcardnum")||"",t.formData.phone=t.$store.state.phone||localStorage.getItem("phone")||"";case 5:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t,a="#numberInput"+t.pwdid,n="areaNumber"+t.pwdid,s="#numberInput2"+t.pwdid,r="areaNumber2"+t.pwdid,$(window).loadKBD(),$(a).click((function(){$(a).showKBD({areaId:n,pageId:"opencard",maxLen:6,cursor:!0,mask:!0})})),$(s).click((function(){$(s).showKBD({areaId:r,pageId:"opencard",maxLen:6,cursor:!0,mask:!0})}));case 8:case"end":return e.stop()}}),e)})))()},methods:{backFn:function(){this.$router.go(-1)},sureSetpayPwd:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.smsOrder){e.next=3;break}return t.$toast("请先获取验证码"),e.abrupt("return");case 3:return a={transCode:"RESETPASSWD2",mobileNo:t.formData.phone?JSON.stringify(t.formData.phone):"",cardNo:t.cardNo,smsOrder:t.smsOrder,smsCode:t.formData.code,newCardPin:t.encpwd},e.next=6,t.$api.reqFn(a);case 6:n=e.sent,"SUCCESS"==n.retCode?t.activation?(t.temp=3,t.$toast("激活成功")):t.$toast("修改成功"):t.$toast(n.retMsg);case 8:case"end":return e.stop()}}),e)})))()},sureSetPwd:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.canClick){e.next=2;break}return e.abrupt("return");case 2:t.sureSetpayPwd();case 3:case"end":return e.stop()}}),e)})))()},openKBD:function(){$("#numberInput").showKBD({areaId:"areaNumber",pageId:"page",maxLen:6,cursor:!0,mask:!1})},getCode:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s,r,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t,t.formData.phone||t.$toast("请输入手机号"),n="#numberInput"+t.pwdid,s="numberInput"+t.pwdid,"areaNumber"+t.pwdid,r="#numberInput2"+t.pwdid,"areaNumber2"+t.pwdid,"#numberInput3"+t.pwdid,"areaNumber3"+t.pwdid,i=$(r).checkPWD(s),e.t0=i,e.next=1===e.t0?13:2===e.t0?14:3===e.t0?16:4===e.t0?18:5===e.t0?20:22;break;case 13:return e.abrupt("break",22);case 14:return t.$toast("密码输入不一致"),e.abrupt("return");case 16:return t.$toast("请输入确认密码"),e.abrupt("return");case 18:return t.$toast("请输入密码"),e.abrupt("return");case 20:return t.$toast("请输入密码和确认密码"),e.abrupt("return");case 22:return o=$(n).getKBD(),o?$.ajax({type:"POST",url:"https://online.gzekt.com/vcard/pwd/ValidServlet",async:!0,headers:{SESSIONID:localStorage.getItem("sessionid"),token:localStorage.getItem("sessionid")},data:{Password:o},dataType:"json",crossDomain:!0,success:function(t){console.log(t),0==t.retcode?(a.encpwd=t.encpwd,a.sendCode()):this.$toast(t.retmsg)}}):t.$toast("请输入密码"),e.abrupt("return");case 27:case"end":return e.stop()}}),e)})))()},sendCode:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="sms"+(new Date).getTime(),n={transCode:"RESETPASSWD1",smsOrder:a,mobileNo:JSON.stringify(t.formData.phone),userName:t.formData.name,idCardNo:t.formData.cardnum,cardNo:t.cardNo},e.next=4,t.$api.sendMs(n);case 4:if(s=e.sent,console.log(s),"SUCCESS"!=s.retCode){e.next=12;break}t.canClick=!0,t.orderNo=s.orderNo,t.smsOrder=a,e.next=13;break;case 12:return e.abrupt("return");case 13:t.issend=!0,t.timer=setInterval((function(){t.time-=1,t.codeText=t.time+" s 重新发送",t.time<=0&&(clearInterval(t.timer),t.issend=!1,t.codeText="重新发送",t.time=60)}),1e3);case 15:case"end":return e.stop()}}),e)})))()}}},Re=Ee,Pe=(a("e816"),Object(l["a"])(Re,Oe,Te,!1,null,"d2d471ac",null)),je=Pe.exports,Be=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("pheader",{attrs:{back:!0,title:"",bg:"#d9302500",color:"white"}}),t._m(0),n("div",[n("div",{staticClass:"navs"},[n("div",{staticClass:"nav",class:0==t.active?"active":"",on:{click:function(e){return t.changeNav(0)}}},[t._v(" 学员注册 ")])]),n("div",[n("div",{staticClass:"lists"},[n("div",{staticClass:"list",on:{click:function(e){t.showSchool=!0}}},[n("img",{staticClass:"phone",attrs:{src:a("5852")}}),n("div",{staticClass:"listr"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.areaText,expression:"areaText"}],attrs:{readonly:"readonly",type:"",name:"",id:"",value:"",placeholder:"所在校区"},domProps:{value:t.areaText},on:{input:function(e){e.target.composing||(t.areaText=e.target.value)}}})])]),n("div",{staticClass:"list"},[n("img",{staticClass:"codeimg",attrs:{src:a("a868")}}),n("div",{staticClass:"listr"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.member,expression:"member"}],attrs:{type:"",name:"",id:"",value:"",placeholder:"学生学号"},domProps:{value:t.member},on:{input:function(e){e.target.composing||(t.member=e.target.value)}}})])]),n("div",{staticClass:"list"},[n("img",{staticClass:"codeimg",attrs:{src:a("6edb")}}),n("div",{staticClass:"listr"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.pass,expression:"pass"}],attrs:{type:"password",name:"",id:"",value:"",placeholder:"密码"},domProps:{value:t.pass},on:{input:function(e){e.target.composing||(t.pass=e.target.value)}}})])]),n("div",{staticClass:"list"},[n("img",{staticClass:"codeimg",attrs:{src:a("6edb")}}),n("div",{staticClass:"listr"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.pass1,expression:"pass1"}],attrs:{type:"password",name:"",id:"",value:"",placeholder:"确认密码"},domProps:{value:t.pass1},on:{input:function(e){e.target.composing||(t.pass1=e.target.value)}}})])])])]),n("div",{staticClass:"bom"},[n("div",{staticClass:"btn",on:{click:function(e){return t.loginFn()}}},[t._v(" 注册 ")])])]),n("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.showSchool,callback:function(e){t.showSchool=e},expression:"showSchool"}},[n("van-cascader",{attrs:{title:"请选择所在校区",options:t.options,"field-names":t.fieldNames},on:{close:function(e){t.show=!1},finish:t.onFinish},model:{value:t.cascaderValue,callback:function(e){t.cascaderValue=e},expression:"cascaderValue"}})],1)],1)},Fe=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tBox"},[n("img",{staticClass:"bg",attrs:{src:a("83a3")}}),n("div",{staticClass:"logo"})])}],Ae=a("897d"),Le=a.n(Ae),Me={name:"login",components:{},data:function(){return{showSchool:!1,active:0,issend:!1,codeText:"发送验证码",timer:null,time:60,orderNo:"",phone:"",code:"",pass:"",pass1:"",smsOrder:"",areaText:"",schoolId:"",areaNo:"",cascaderValue:"",options:[],fieldNames:{text:"schoolArea",value:"schoolAreaNo",children:"schoolAreas"},member:""}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$route.query.nav&&(t.active=t.$route.query.nav),t.getschool();case 2:case"end":return e.stop()}}),e)})))()},methods:{onFinish:function(t){console.log(t),this.areaText=t.selectedOptions[0].schoolName+" "+t.selectedOptions[1].schoolArea,this.schoolId=t.selectedOptions[0].schoolId,this.areaNo=t.selectedOptions[1].schoolAreaNo,this.showSchool=!1},getschool:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={transCode:"SCHOOLAREA",mobileNo:localStorage.getItem("phone")},e.next=3,t.$api.reqFn(a);case 3:if(n=e.sent,"SUCCESS"==n.retCode){for(s=0;s<n.schoolInfo.length;s++)n.schoolInfo[s].schoolAreaNo=n.schoolInfo[s].schoolId,n.schoolInfo[s].schoolAreas=n.schoolInfo[s].schoolArea,n.schoolInfo[s].schoolArea=n.schoolInfo[s].schoolName;t.options=n.schoolInfo}case 5:case"end":return e.stop()}}),e)})))()},loginFn:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.schoolId&&t.areaNo){e.next=3;break}return t.$toast("请先选择校区"),e.abrupt("return");case 3:if(t.pass){e.next=6;break}return t.$toast("请输入密码"),e.abrupt("return");case 6:if(t.pass1){e.next=9;break}return t.$toast("请输入确认密码"),e.abrupt("return");case 9:if(t.pass1==t.pass){e.next=12;break}return t.$toast("密码不一致，请重新输入"),e.abrupt("return");case 12:return console.log(t.pass),console.log(t.$store.state.token),a=t,n={transCode:"MANLOGIN",mobileNo:localStorage.getItem("phone"),areaNo:t.areaNo,schoolId:t.schoolId,member:t.member,memberPasswd:Le()(t.pass+t.$store.state.token)},e.next=18,a.$api.reqFn(n);case 18:s=e.sent,console.log(s),"SUCCESS"==s.retCode&&(localStorage.setItem("campusId",t.member),localStorage.setItem("cardFace",s.cardFace),t.$dialog.alert({title:"SUCCESS",message:"学员注册成功"}).then((function(){t.$router.go(-1)})).catch((function(){})));case 21:case"end":return e.stop()}}),e)})))()},goRegisert:function(){this.$router.push({path:"/register"})},goforgot:function(){this.$router.push({path:"/forgot"})},changeNav:function(t){this.active=t,this.issend=!1,this.codeText="发送验证码",clearInterval(this.timer),this.timer=null,this.tim=60},getCode:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.phone){e.next=3;break}return t.$toast("请输入正确的手机号"),e.abrupt("return");case 3:return a="sms"+(new Date).getTime(),n={transCode:"SMSREQUEST",mobileNo:t.phone,smsOrder:a},e.next=7,t.$api.sendMs(n);case 7:if(s=e.sent,console.log(s),"SUCCESS"!=s.retCode){e.next=15;break}t.$toast("发送成功"),t.orderNo=s.orderNo,t.smsOrder=a,e.next=16;break;case 15:return e.abrupt("return");case 16:t.issend=!0,t.timer=setInterval((function(){t.time-=1,t.codeText=t.time+" s 重新发送",t.time<=0&&(clearInterval(t.timer),t.issend=!1,t.codeText="重新发送",t.time=60)}),1e3);case 18:case"end":return e.stop()}}),e)})))()}}},Ue=Me,qe=(a("cca6"),Object(l["a"])(Ue,Be,Fe,!1,null,"0ffd55f9",null)),ze=qe.exports,Je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"opencard",attrs:{id:"opencard"}},[a("pheader",{attrs:{title:"设置开机密码",back:!0}}),a("div",{staticClass:"count"},[a("div",[a("div",{staticClass:"jhBox"},[a("div",{staticClass:"list"},[a("span",{staticClass:"listl"},[t._v("开机密码")]),a("div",{staticClass:"listr",attrs:{id:"pas1"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],attrs:{onkeyup:"value=value.replace(/[^\\w\\.\\/]/ig,'')",placeholder:"请输入开机密码",type:"text"},domProps:{value:t.formData.password},on:{input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}})])]),a("div",{staticClass:"list"},[a("span",{staticClass:"listl"},[t._v("确认开机密码")]),a("div",{staticClass:"listr",attrs:{id:"pas2"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.passwordagain,expression:"formData.passwordagain"}],attrs:{onkeyup:"value=value.replace(/[^\\w\\.\\/]/ig,'')",placeholder:"请确认开机密码",type:"text"},domProps:{value:t.formData.passwordagain},on:{input:function(e){e.target.composing||t.$set(t.formData,"passwordagain",e.target.value)}}})])])])])]),a("div"),a("div",{staticClass:"btn",on:{click:function(e){return t.sureSetPwd()}}},[t._v(" 确认修改 ")])],1)},Ke=[],We={name:"setpaypwd",components:{},data:function(){return{temp:0,iserror:!0,formData:{phone:"",name:"",cardnum:"",idNeverExpired:"",idCardIssueDate:"",idCardExpDate:"",userOccupation:"",gender:"",countryCode:"156",type:"idcard",idPhotoFront:"",idPhotoBack:"",onecardnum:"",password:"",passwordagain:"",code:""},issend:!1,codeText:"发送验证码",timer:null,time:60,value:!1,FId:"123",index:0,userInfo:null,encpwd:"",encpwd3:"",smsOrder:"",orderNo:"",cardNo:""}},watch:{formData:{handler:function(t){t.phone?(t.phone.length,t.phone=parseInt(t.phone)):t.phone="",console.log(t)},deep:!0}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.formData.phone=t.$store.state.phone||localStorage.getItem("phone")||"";case 1:case"end":return e.stop()}}),e)})))()},mounted:function(){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{sureSetloginPwd:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={transCode:"CHGPASSWD",mobileNo:t.formData.phone?JSON.stringify(t.formData.phone):"",cardNo:t.cardNo,oldCardPin:t.encpwd3,newCardPin:t.encpwd},console.log(a),e.abrupt("return");case 5:e.sent;case 6:case"end":return e.stop()}}),e)})))()},sureSetPwd:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.formData.password==t.formData.passwordagain){e.next=3;break}return t.$toast("两次密码不一致，请重新输入"),e.abrupt("return");case 3:return t.$toast("密码设置成功"),localStorage.setItem("openPass",t.formData.passwordagain),localStorage.setItem("openPassok","success"),t.formData.password="",t.formData.passwordagain="",t.$router.go(-1),e.abrupt("return");case 11:case"end":return e.stop()}}),e)})))()},openKBD:function(){console.log(222),$("#numberInput").showKBD({areaId:"areaNumber",pageId:"page",maxLen:6,cursor:!0,mask:!1})},getCode:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t,t.formData.phone||t.$toast("请输入手机号"),n=$("#numberInput2").checkPWD("numberInput"),e.t0=n,e.next=1===e.t0?6:2===e.t0?7:3===e.t0?9:4===e.t0?11:5===e.t0?13:15;break;case 6:return e.abrupt("break",15);case 7:return t.$toast("密码输入不一致"),e.abrupt("return");case 9:return t.$toast("请输入确认密码"),e.abrupt("return");case 11:return t.$toast("请输入密码"),e.abrupt("return");case 13:return t.$toast("请输入密码和确认密码"),e.abrupt("return");case 15:return s=$("#numberInput").getKBD(),r=$("#numberInput3").getKBD(),s?$.ajax({type:"POST",url:"https://online.gzekt.com/vcard/pwd/ValidServlet",async:!0,headers:{SESSIONID:localStorage.getItem("sessionid"),token:localStorage.getItem("sessionid")},data:{Password:r},dataType:"json",crossDomain:!0,success:function(t){console.log(t),0==t.retcode?(a.encpwd3=t.encpwd,$.ajax({type:"POST",url:"https://online.gzekt.com/vcard/pwd/ValidServlet",async:!0,headers:{SESSIONID:localStorage.getItem("sessionid"),token:localStorage.getItem("sessionid")},data:{Password:s},dataType:"json",crossDomain:!0,success:function(t){console.log(t),0==t.retcode?(a.encpwd=t.encpwd,console.log("旧密码"),console.log(a.encpwd3),console.log("新密码"),console.log(a.encpwd),a.sureSetloginPwd()):this.$toast(t.retmsg)}})):this.$toast(t.retmsg)}}):t.$toast("请输入密码"),e.abrupt("return");case 21:case"end":return e.stop()}}),e)})))()},sendCode:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="sms"+(new Date).getTime(),n={transCode:"RESETPASSWD1",smsOrder:a,mobileNo:JSON.stringify(t.formData.phone),userName:t.formData.name,idCardNo:t.formData.cardnum,cardNo:t.cardNo},e.next=4,t.$api.sendMs(n);case 4:if(s=e.sent,console.log(s),"SUCCESS"!=s.retCode){e.next=11;break}t.orderNo=s.orderNo,t.smsOrder=a,e.next=12;break;case 11:return e.abrupt("return");case 12:t.issend=!0,t.timer=setInterval((function(){t.time-=1,t.codeText=t.time+" s 重新发送",t.time<=0&&(clearInterval(t.timer),t.issend=!1,t.codeText="重新发送",t.time=60)}),1e3);case 14:case"end":return e.stop()}}),e)})))()}}},He=We,Ve=(a("d066"),Object(l["a"])(He,Je,Ke,!1,null,"6e26dc13",null)),Ye=Ve.exports,Qe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"error"},[a("div",[a("span",[t._v("404")]),a("p",[t._v("请求错误")]),a("div",{staticClass:"btn",on:{click:function(e){return t.goHome()}}},[t._v(" 返回首页 ")])])])},Ge=[],Xe={name:"",components:{},data:function(){return{num:1}},created:function(){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{goHome:function(){window.location.href="/"}}},Ze=Xe,ta=(a("f92c"),Object(l["a"])(Ze,Qe,Ge,!1,null,"b472c7d4",null)),ea=ta.exports;n["a"].use(p["a"]);var aa=[{path:"/",name:"Home",component:K},{path:"/balance",name:"balance",component:St},{path:"/recharge",name:"recharge",component:Pt},{path:"/rechargelist",name:"rechargelist",component:It},{path:"/limit",name:"limit",component:Wt},{path:"/consume",name:"consume",component:Xt},{path:"/consumedetail",name:"consumedetail",component:se},{path:"/opencard",name:"opencard",component:ve},{path:"/set",name:"set",component:Mt},{path:"/setpwdl",name:"setpwdl",component:De},{path:"/setpaypwd",name:"setpaypwd",component:Ne},{path:"/forgotpaypwd",name:"forgotpaypwd",component:je},{path:"/stureg",name:"stureg",component:ze},{path:"/setpwd",name:"setpwd",component:Ye},{path:"/login",name:"Login",component:G},{path:"/resume",name:"resume",component:nt},{path:"/forgot",name:"forgot",component:lt},{path:"/register",name:"register",component:ht},{path:"*",name:"error",component:ea}],na=new p["a"]({mode:"hash",base:"",routes:aa}),sa=na;n["a"].use(g["a"]);var ra=new g["a"].Store({state:{token:"",current:1,phone:"",pwdid:0,deviceOsType:"",version:"",DeviceNum:""},mutations:{},actions:{},modules:{}}),ia=a("b1eb"),oa=(a("a7eb"),a("965d")),ca=a.n(oa),la=a("76b3"),da=function(t,e){uni.postMessage({data:{type:e||"router",isQuitApp:!!t}})},ua=a("4845"),pa=a("e3b9");a("fb0c");function ma(t,e){var a=(new Date).getTime(),n=new Date(a-86400*(t>0&&t?t:0)*1e3),s=n.getFullYear(),r=n.getMonth()+1,i=n.getDate();console.log(i);var o=s+(e||"")+(r<10?"0"+r:r)+(e||"")+(i<10?"0"+i:i);return console.log(o),o}var fa={getBeforeDate:ma},ha=function(t,e,a){var n=new window.plus.nativeObj.Bitmap("image");n.loadBase64Data(t,(function(t){ga(n,e,a)}),(function(t){window.plus.nativeUI(t.message)}))},ga=function(t,e,a){var n=ba(10);t.save("_doc/".concat(n,".jpg"),{overwrite:!1},(function(t){console.log(t.target),va(t.target,e,a)}),(function(t){window.plus.nativeUI(t.message)}))},va=function(t,e,a){window.plus.gallery.save(t,(function(t){var a=window.plus.nativeObj.Bitmap.getBitmapById("image");a.clear(),e()}),(function(t){window.plus.nativeUI(t.message),a()}))},ba=function(t){t=t||32;for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",a=e.length,n="",s=0;s<t;s++)n+=e.charAt(Math.floor(Math.random()*a));return n},wa={imageDown:ha},Ca=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"headerBox",style:{background:t.bg?t.bg:"",color:t.color}},[n("div",{staticClass:"header"},[t.back?n("div",{staticClass:"back",on:{click:function(e){return t.backFn()}}},[n("img",{attrs:{src:a("336c")}})]):n("div"),n("div",{staticClass:"tit"},[t._v(t._s(t.title))]),t.right?n("div",{staticClass:"right",on:{click:function(e){return t.rightFn()}}},[t._v(" "+t._s(t.right)+" ")]):n("div",{staticClass:"right"})])])},xa=[],Sa={name:"pubheader",props:{title:String,back:{value:Boolean,default:!0},right:{value:String,default:""},bg:{value:String,default:""},color:{value:String,default:"white"}},data:function(){return{}},created:function(){},methods:{backFn:function(){this.$router.go(-1)},rightFn:function(){this.$emit("rightFn","")}}},Da=Sa,ya=(a("641c"),Object(l["a"])(Da,Ca,xa,!1,null,"2e18ce7c",null)),_a=ya.exports,ka=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"footerBox"},[n("div"),n("div",{staticClass:"footer"},[n("div",{class:0==t.active?"active":"",on:{click:function(e){return t.changeNav(0)}}},[0==t.active?n("img",{attrs:{src:a("2bbc")}}):n("img",{attrs:{src:a("714a")}}),n("span",[t._v("金融")])]),n("div",{staticClass:"home",class:1==t.active?"active":"",on:{click:function(e){return t.changeNav(1)}}},[1==t.active?n("img",{attrs:{src:a("4fce")}}):n("img",{attrs:{src:a("630a")}}),n("span",[t._v("首页")])]),n("div",{staticClass:"user",class:2==t.active?"active":"",on:{click:function(e){return t.changeNav(2)}}},[2==t.active?n("img",{attrs:{src:a("2481")}}):n("img",{attrs:{src:a("43a1")}}),n("span",[t._v("个人")])])])])},$a=[],Ia={name:"pubfooter",props:{active:{value:Number,default:0}},data:function(){return{}},created:function(){},methods:{changeNav:function(t){this.$store.state.current=t}}},Na=Ia,Oa=(a("30e2"),Object(l["a"])(Na,ka,$a,!1,null,"ee18c304",null)),Ta=Oa.exports,Ea=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-div",on:{click:function(e){return e.stopPropagation(),t.toggle.apply(null,arguments)}}},[a("span",{staticClass:"weui-switch",class:{"weui-switch-on":t.me_checked},attrs:{value:t.value}}),t.me_checked?t._e():a("div",{staticClass:"weui-div-2"},[t._v("否")]),t.me_checked?a("div",{staticClass:"weui-div-1"},[t._v("是")]):t._e()])},Ra=[],Pa={props:{value:{type:Boolean,default:!0},FId:{type:String,default:""},index:{type:Number,default:11090},handle:{type:Boolean,default:!0}},data:function(){return{me_checked:this.value}},watch:{value:function(){this.me_checked=this.value}},methods:{toggle:function(){!0===this.handle&&(this.me_checked=!this.me_checked,this.$emit("changeSwitch",this.me_checked,this.FId,this.index))}}},ja=Pa,Ba=(a("6e33"),Object(l["a"])(ja,Ea,Ra,!1,null,null,null)),Fa=Ba.exports,Aa={baseURL:"https://online.gzekt.net/vcard",sentry:{DSN:"",version:"v1.0.0"}},La=a("9605"),Ma=a.n(La),Ua=(a("1926"),a("a536"),a("fee8"),{getSign:function(t){var e="key",a="9d101c97133837e13dde2d32a5054abb",n="";if(n=ra.state.token?Le()(a+ra.state.token):a,"string"==typeof t)return qa(t,e,n);if("object"==Object(le["a"])(t)){var s=[];for(var r in t)"object"!=Object(le["a"])(t[r])&&""!=t[r]&&s.push(r+"="+t[r]);return qa(s.join("&"),e,n)}}});function qa(t,e,a){var n=t,s=n.split("&").sort().join("&"),r=s+"&key="+a,i=Le()(r).toUpperCase();return i}var za=k.a.create({headers:{"content-type":"application/json"}});za.defaults.baseURL=Aa.baseURL,za.defaults.baseURL=Aa.baseURL,za.defaults.withCredentials=!0,za.interceptors.request.use((function(t){var e="";"UPLOADPHOTO"==t.data.transCode&&(e="证件处理中"),pa["a"].loading({message:e,forbidClick:!0,duration:0});var a={version:"1.0.0",orderNo:"DeviceNumTEST"+(new Date).getTime(),deviceId:"DeviceNumTEST",deviceOsType:ra.state.deviceOsType||"Android",deviceIP:"192.168.2.103",appName:"HMFAPP",deviceType:"ATH-AL00",deviceLocation:"+37.12/-121.23",deviceSimNumber:"",deviceFullSimCardNo:"",Sign:"",token:ra.state.token||""};if(Object.assign(t.data,a,t.data),t.data.Sign=Ua.getSign(t.data),"/vcard/pwd/ValidServlet"==t.url){var n={Password:t.data.Password};t.headers={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",sessionid:localStorage.getItem("sessionid"),token:localStorage.getItem("sessionid")},t.data=Ma.a.stringify(n)}return t}),(function(t){return pa["a"].clear(),Promise.reject(t)})),za.interceptors.response.use((function(t){if(pa["a"].clear(),200==t.status)return"TOKENEXP"==t.data.retCode||"NEEDREG"==t.data.retCode?(ra.state.token="",ra.state.Sign="",ra.state.frontSeq="",localStorage.setItem("token",""),localStorage.setItem("Sign",""),localStorage.setItem("Sign",""),setTimeout((function(){sa.push("/login")}),2e3),t.data):("SUCCESS"==t.data.retCode||Object(pa["a"])(t.data.retMsg),t.data);Object(pa["a"])(t.data.retMsg)}),(function(t){return pa["a"].clear(),Object(pa["a"])("请求错误"),console.log("--- 401 res error response ---"),t}));var Ja=za,Ka=function(t){return Ja({url:"/vcard/pwd/ValidServlet",method:"post",data:t})},Wa=function(t){return Ja({url:"/vcard/pwd/PasswordServlet",method:"post",data:t})},Ha=function(t){return Ja({url:"",method:"post",data:t})},Va=function(t){return Ja({url:"",method:"post",data:t})},Ya={sendMs:Va,reqFn:Ha,getValidServlet:Ka,getPasswordServlet:Wa},Qa=null;function Ga(){var t=Qa[0];t.authResult||(t.authorize((function(t){alert("授权成功："+JSON.stringify(t))}),(function(t){alert("授权失败："+JSON.stringify(t))}),{scope:"snsapi_userinfo",state:"authorize test",appid:"wxbd433e331b2fb2df"}),t.login((function(t){var e=t.target.authResult;alert("登录认证成功："+JSON.stringify(e)),Xa()}),(function(t){alert("登录认证失败！")}),{}))}function Xa(){var t=Qa[0];t.authResult?t.getUserInfo((function(e){alert("获取用户信息成功："+JSON.stringify(t.userInfo));JSON.stringify(t.userInfo)}),(function(t){alert("获取用户信息失败："+t.message+" - "+t.code)})):alert("未登录授权！")}function Za(){plus.oauth.getServices((function(t){Qa=t,Ga()}),(function(t){alert("获取分享服务列表失败："+t.message+" - "+t.code)}))}var tn={wxlog:Za};n["a"].use(ca.a),n["a"].use(la["a"]),n["a"].use(ua["a"]),n["a"].prototype.$toast=pa["a"],n["a"].use(ia["a"]),n["a"].prototype.getBeforeDate=fa.getBeforeDate,n["a"].prototype.$imageDown=wa.imageDown,n["a"].component("pheader",_a),n["a"].component("pfooter",Ta),n["a"].component("vswitch",Fa),n["a"].prototype.$getSign=Ua.getSign,n["a"].prototype.$api=Ya,n["a"].config.productionTip=!1,n["a"].prototype.$utils=tn,sa.beforeEach((function(t,e,a){"/login"==t.path||"/register"==t.path||"/forgot"==t.path?ra.state.token||localStorage.getItem("token")?a("/"):a():ra.state.token||localStorage.getItem("token")?a():a("/login")})),sa.afterEach((function(t){console.log("to.name:"+t.name),console.log(localStorage.getItem("openPass")),localStorage.getItem("isFromApp")&&JSON.parse(localStorage.getItem("isFromApp"))&&("home"==t.name?da(!0):da(!1))})),window.vm=new n["a"]({router:sa,store:ra,render:function(t){return t(u)}}).$mount("#app")},"57d8":function(t,e,a){t.exports=a.p+"static/img/kksuccess.png?"},5852:function(t,e,a){t.exports=a.p+"static/img/school.png?"},5926:function(t,e,a){},"5f76":function(t,e,a){"use strict";a("ea21")},"630a":function(t,e,a){t.exports=a.p+"static/img/ico2.png?"},"641c":function(t,e,a){"use strict";a("0cce")},6973:function(t,e,a){"use strict";a("cbfd")},"6a6c":function(t,e,a){t.exports=a.p+"static/img/code.png?"},"6be4":function(t,e,a){},"6e33":function(t,e,a){"use strict";a("6be4")},"6edb":function(t,e,a){t.exports=a.p+"static/img/pass.png?"},"714a":function(t,e,a){t.exports=a.p+"static/img/ico1.png?"},7218:function(t,e,a){"use strict";a("b1c4")},7660:function(t,e,a){t.exports=a.p+"static/img/kkerror.png?"},"83a3":function(t,e,a){t.exports=a.p+"static/img/loginbg.png?"},8741:function(t,e,a){},"8ecc":function(t,e,a){t.exports=a.p+"static/img/dui.png?"},"91b8":function(t,e,a){t.exports=a.p+"static/img/nav3.png?"},"92a3":function(t,e,a){},"92b8":function(t,e,a){"use strict";a("3494")},"9ba0":function(t,e,a){},a261:function(t,e,a){"use strict";a("2c46e")},a30c:function(t,e,a){t.exports=a.p+"static/img/nav2.png?"},a40c:function(t,e,a){},a42e:function(t,e,a){t.exports=a.p+"static/img/nav2.png?"},a5f6:function(t,e,a){t.exports=a.p+"static/img/nav3.png?"},a868:function(t,e,a){t.exports=a.p+"static/img/number.png?"},ad0a:function(t,e,a){},ada6:function(t,e,a){t.exports=a.p+"static/img/we.png?"},afd9:function(t,e,a){},b1c4:function(t,e,a){},b4ec:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAyCAYAAABLXmvvAAAAAXNSR0IArs4c6QAAAdBJREFUWEfN2L1OwzAQAOBzF1behMHxiBB7RVvaPgIvxSNAy6/YEWsv6s7Ac7BUh4ycKBGNfbbPLZmiVvLX+0l6tgIAqOv6nIg+7H1zKaWutNav3c8k75VdDBG/AeBkz8LjqqreJME2MAfT0OJENDHGvEjjTcR3ALD0LD6rqupJEv+F7bXZbNZKqeuhxaVr3sKuyVZEND9E2nswBwcAkbT/gTm4RMPthTl4bs0HYfeY3QPAwlPzqTHmOaXbvXBJPAhz0k5E0ZGzYE7ksd3Ohjm4UmqutX7g1DwKdrhdeJbbcNEwB7evXq31oy/yJFgCT4Y5uK/hsmCH25ROY/9Ss2FO5ES0NMasuj9OBE7BxWCH2yll4hkm2m4XhTk1J6KFMWYtDnPSPhqNLorADr8FgJuBtH8eC/4qAiNi6H1+KQ4joveFUqS5EPHwjxMjvb23l0iqY1Hb6dlwqKZDU0kWHIrUNxAkwzlocqpz0SQ4VFPujB2VasYeWn68DaFFBvq6rsU37MFUI2KRHeP/26aG0ltkYx5CixxFhNDY7h2cOLtfhFCJSBvvuAdsiOg9UpSMtBcxIh7tENWeS4/3NELZY+Ptdnu62+3eAeCswUuktxvYD1NdXwnwtM4xAAAAAElFTkSuQmCC"},bf82:function(t,e,a){"use strict";a("9ba0")},c054:function(t,e,a){},c4bd:function(t,e,a){t.exports=a.p+"static/img/cam.png?"},cbfd:function(t,e,a){},cca6:function(t,e,a){"use strict";a("8741")},cce6:function(t,e,a){"use strict";a("191d")},d066:function(t,e,a){"use strict";a("92a3")},da8b:function(t,e,a){"use strict";a("e281")},e281:function(t,e,a){},e816:function(t,e,a){"use strict";a("229a")},e835:function(t,e,a){"use strict";a("44b8")},ea21:function(t,e,a){},ea58:function(t,e,a){"use strict";a("0582")},ed5a:function(t,e,a){"use strict";a("ad0a")},f273:function(t,e,a){"use strict";a("afd9")},f92c:function(t,e,a){"use strict";a("5926")},fb0c:function(t,e){function a(){var t=document.documentElement.clientWidth||document.body.clientWidth,e=document.querySelector("html");t>=750&&(t=750),console.log(t),e.style.fontSize=t/20+"px"}a(),window.onresize=function(){a()}},fe39:function(t,e,a){},ff23:function(t,e,a){t.exports=a.p+"static/img/nav4.png?"}});